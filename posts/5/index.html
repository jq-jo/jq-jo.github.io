
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JQ Blog</title>
  <meta name="author" content="Jo">

  
  <meta name="description" content="FCM 使い方 Android Firebaseにアプリを登録 build.gradle編集 ルートレベルのbuild.gradle ルートレベルのbuild.gradleにgoogle-services プラグインを指定する。 buildscript { // ... dependencies &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jq-jo.github.io/posts/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="JQ Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">JQ Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="jq-jo.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/16/firebase-cloud-messaging-android/">Firebase Cloud Message in Android</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-16T17:31:59+09:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>5:31 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>FCM 使い方</h2>

<h3>Android</h3>

<ul>
<li>Firebaseにアプリを登録
<img src="https://monosnap.com/file/hIBBp9sb8ANT14AWzJOYekZ9aumLlc.png" alt="Alt text" /></li>
<li><p>build.gradle編集</p>

<ul>
<li>ルートレベルのbuild.gradle</li>
</ul>


<p>ルートレベルのbuild.gradleにgoogle-services プラグインを指定する。</p>

<pre><code>buildscript {
  // ...
  dependencies {
    // ...
    classpath 'com.google.gms:google-services:3.0.0'
  }
}
</code></pre>

<ul>
<li>モジュールのbuild.gradle</li>
</ul>


<p>モジュールのGradleファイル(通常は app/build.gradle)の末尾に apply plugin の行を追加し、Gradleプラグインを有効化する。<br>
必要なライブラリをdependenciesのところに書く。</p>

<pre><code>apply plugin: 'com.android.application'

android {
  // ...
}

dependencies {
  // ...
  compile 'com.google.firebase:firebase-messaging:9.6.1'
}

apply plugin: 'com.google.gms.google-services'
</code></pre></li>
<li><p>アプリのマニフェストを編集</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;service
</span><span class='line'>    android:name=".MyFirebaseMessagingService"&gt;
</span><span class='line'>    &lt;intent-filter&gt;
</span><span class='line'>        &lt;action android:name="com.google.firebase.MESSAGING_EVENT"/&gt;
</span><span class='line'>    &lt;/intent-filter&gt;
</span><span class='line'>&lt;/service&gt;
</span><span class='line'>
</span><span class='line'>    ...
</span><span class='line'>
</span><span class='line'>&lt;service
</span><span class='line'>    android:name=".MyFirebaseInstanceIDService"&gt;
</span><span class='line'>    &lt;intent-filter&gt;
</span><span class='line'>        &lt;action android:name="com.google.firebase.INSTANCE_ID_EVENT"/&gt;
</span><span class='line'>    &lt;/intent-filter&gt;
</span><span class='line'>&lt;/service&gt;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>google-services.json
google-services.jsonファイルをFirebaseコンソールからダウンロードし、プロジェクトに入れ込む。
<img src="https://monosnap.com/file/p8uiAYlbEALAWjL0TjsH4Yz4lPc8ei.png" alt="Alt text" />
<img src="https://monosnap.com/file/YTXZIjFFnATOBSacyroYaotXk02imJ.png" alt="Alt text" /></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/16/firebase-cloud-messaging-ios/">Firebase Cloud Message in iOS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-16T15:29:27+09:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:29 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h1>FCM (Firebase Cloud Message)</h1>

<h2>Firebaseとは</h2>

<p>FirebaseはGoogleが運営しているmBaaS(Mobile Backend as a Service)であり、Backend as a Serviceとは一般的にアプリケーションに要求される色んな機能をまとめて提供してくれるサービスだ。</p>

<h2>Firebaseの提供機能</h2>

<ol>
<li>Analytics</li>
<li>Cloud Messaging</li>
<li>認証</li>
<li>Realtime Database</li>
<li>Storage</li>
<li>Hosting</li>
<li>Remote Config</li>
<li>Test Lab</li>
<li>Crash Reporting</li>
<li>Notifications</li>
<li>App Indexing</li>
<li>Dynamic Links</li>
<li>Invites</li>
<li>AdWords</li>
</ol>


<p><br>詳しい情報はこちら。<br>
&ndash; <a href="https://firebase.google.com/features/">https://firebase.google.com/features/</a><br><br></p>

<p>値段によってプランがそれぞれ違うけど、もちろん無料プランもある<br>
<img src="https://monosnap.com/file/boWswwYmYeYfDDxw4cLJzxCr5rB1pK.png" alt="Alt text" /></p>

<h2>FCM 使い方</h2>

<h3>iOS (Swift基準)</h3>

<ul>
<li>Firebaseにアプリを登録<br>
<img src="https://monosnap.com/file/gpotQYhuSizvMb0v4eXnJtemkm7E9R.png" alt="Alt text" />
<img src="https://monosnap.com/file/vq9PlFYrWL6ARYj8iPlwI1dBLICUcO.png" alt="Alt text" />
<img src="https://monosnap.com/file/z8uyP5c2SQS2Kh1HF3bNSadeb9BUvw.png" alt="Alt text" /></li>
<li>pod追加<br>

<ul>
<li>まずcocoapodsをインストールする。</li>
</ul>
</li>
<li><pre><code>$ sudo gem install cocoapods
$ pod setup
</code></pre>

<ul>
<li>そしてPodfileを作る。</li>
</ul>
</li>
<li><pre><code>$ cd your-project directory
$ pod init
</code></pre>

<ul>
<li>Podfileが作られたらファイルの中に必要なpodを追加する。</li>
</ul>
</li>
<li><pre><code>pod 'Firebase/Messaging'
</code></pre>

<ul>
<li>podをインストールして.xcworkspaceファイルを開いてプロジェクトを確認する。</li>
</ul>
</li>
<li><pre><code>$ pod install
$ open your-project.xcworkspace
</code></pre>

<ul>
<li>FirebaseコンソールでGoogleService-Info.plistをダウンロードしてプロジェクトに入れる。</li>
</ul>
</li>
</ul>


<p><img src="https://monosnap.com/file/gT1lH6wOd02epXkIuURW9ZChZFSA8W.png" alt="Alt text" />
<img src="https://monosnap.com/file/RoO3sspdEKqfNxJpaX0iUqTkeQUz3v.png" alt="Alt text" /></p>

<ul>
<li>ソースコード追加<br>
Firebaseには基本的なソースコードを提供してくれるのでそれを使えば少なくともサーバから送るプッシュ通知を受信するのはできる。

<ul>
<li><a href="https://github.com/firebase/quickstart-ios/tree/master/messaging/">https://github.com/firebase/quickstart-ios/tree/master/messaging/</a>
大事なのはiOS10とその以下のバージョンを分岐することと、
<code>
FIRApp.configure()
</code>
メソッドで初期化すること。後は自分の環境に合わせてメソッドをカスタマイズする。</li>
</ul>
</li>
<li>APNsのSSL証明書のプロビジョニング

<ul>
<li><a href="https://firebase.google.com/docs/cloud-messaging/ios/certs">https://firebase.google.com/docs/cloud-messaging/ios/certs</a></li>
</ul>
</li>
</ul>


<p>上記のリンクのとおり正しく進んだらp12ファイルを保存できるが、その保存したp12ファイルを下の画面にみえるところにアップすればセッティングは終わり。</p>

<p><img src="https://monosnap.com/file/ryYwUyf6v5XIx8aB1SYSx5TuNJE0Yi.png" alt="Alt text" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/26/mobile-app-sinsa/">iOS, Androidの申請</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-26T14:55:41+09:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:55 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>初めに</h2>

<p>アプリ申請の手順のまとめ。</p>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<h3>使用機能</h3>

<ul>
<li>Android

<ul>
<li>Webview</li>
<li>Tab Layout</li>
<li>Push Notification</li>
<li>NativeのCamera, Album 機能</li>
</ul>
</li>
<li>iOS

<ul>
<li>UIWebview</li>
<li>UITabbar</li>
<li>Push Notification</li>
<li>NativeのCamera, Album 機能</li>
</ul>
</li>
</ul>


<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<h3>手順</h3>

<ul>
<li>Android

<ul>
<li>まず、下の写真のように新しいアプリを追加する。
<img src="https://monosnap.com/file/0oft4oL4j2UnOa98R6QjH5RcRUXR1h.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/VHZebUIkyhPtiWz29Drj5yD3EXNNvR.png" alt="Alt text" /><br></li>
<li>APKをアップロードする。
<img src="https://monosnap.com/file/ovRWMylsbMP3zBG4xHyU69fSdaHYZ2.png" alt="Alt text" /><br></li>
<li>求められるものを手順に合わせて記入する。
<img src="https://monosnap.com/file/RJ2FabWM459r5NP1m2qUhDIixNdtFq.png" alt="Alt text" /><br>

<ul>
<li>必須項目

<ul>
<li>タイトル(30文字)</li>
<li>簡単な説明(80文字)</li>
<li>詳しい説明(4000文字)</li>
<li>スクリーンショット(2枚)</li>
<li>高解像度アイコン(512x512, 32ビットPNG)</li>
<li>ヘッダー画像(横1,024x縦500, JPGまたは24ビットPNG)</li>
<li>アプリのタイプ</li>
<li>カテゴリ</li>
<li>コンテンツのレーティング</li>
<li>新しいコンテンツ レーティング</li>
<li>メール(連絡先のメールアドレスを入力, このアドレスはアプリと一緒に公開される)</li>
<li>プライバシー ポリシー
<img src="https://monosnap.com/file/AQ9iFtxUtatRKZHalXtO1jUmRCwgwr.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/f1dRjy5c5vRC0QIJEt3yutZno2bjbN.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/5ChIltchsvT4XpSA0OSuLQsMEreTKS.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/NpPqSIsqPI3qRMtYTGSzE0qWscsQi1.png" alt="Alt text" /><br></li>
</ul>
</li>
</ul>
</li>
<li>コンテンツのレーティングを取る。
<img src="https://monosnap.com/file/Y8GJYzYgJogJSsc3PIjjcCRBvqZo2b.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/09bxiDWaQbxLHGgS0b6G0MiiphXkFM.png" alt="Alt text" /><br></li>
<li>価格と販売/配布地域を設定する。

<ul>
<li>必須項目

<ul>
<li>国</li>
<li>広告を含む</li>
<li>コンテンツ ガイドライン</li>
<li>米国輸出法
<img src="https://monosnap.com/file/HuuNV8YxC8Oez7qgdd3g5kbXkLX4kF.png" alt="Alt text" /><br></li>
</ul>
</li>
</ul>
</li>
<li>下の写真のように全部記入すればチェック表示が現れアプリを公開できるようになる。
<img src="https://monosnap.com/file/YaoEiy4ny2tqtA1zu17DTjXArb5QOi.png" alt="Alt text" /><br></li>
</ul>
</li>
</ul>


<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<ul>
<li>iOS

<ul>
<li>新規アプリを登録する。
<img src="https://monosnap.com/file/EtKbeKmRmOpJ0CtEIwbaXR8DJTUVkV.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/d6DRNAO6q6In0z8LkgxtH6aZoY0YIT.png" alt="Alt text" /><br></li>
<li>Appleは必須項目とかは別に書いてないのでできるかぎり全部記入する方が良いと思う。
<img src="https://monosnap.com/file/wdsW9eSrTlTbEpqJCWCl4TdMd2YvbR.png" alt="Alt text" /><br></li>
<li>Appleはスクリーンショットにかなり厳しい。

<ul>
<li>プレビュー, スクリーンショット

<ul>
<li>5.5インチディスプレイ(App プレビュー(1枚) / スクリーンショット(5枚))

<ul>
<li>72 dpi, RGB, flattened, no transparency</li>
<li>High-quality JPEG or PNG image file format</li>
<li>1242 x 2208 pixels for hi-res portrait</li>
<li>2208 x 1242 pixels for hi-res landscape</li>
</ul>
</li>
<li>4.7インチディスプレイ(App プレビュー(1枚) / スクリーンショット(5枚))

<ul>
<li>72 dpi, RGB, flattened, no transparency</li>
<li>High-quality JPEG or PNG image file format</li>
<li>750 x 1334 pixels for hi-res portrait</li>
<li>1334 x 750 pixels for hi-res landscape</li>
</ul>
</li>
<li>4.0インチディスプレイ(App プレビュー(1枚) / スクリーンショット(5枚))

<ul>
<li>72 dpi, RGB, flattened, no transparency</li>
<li>High-quality JPEG or PNG image file format</li>
<li>Any of the following sizes:

<ul>
<li>640 x 1096 pixels for portrait (without status bar) minimum</li>
<li>640 x 1136 pixels for portrait (full screen) maximum</li>
<li>1136 x 600 pixels for landscape (without status bar) minimum</li>
<li>1136 x 640 pixels for landscape (full screen) minimum</li>
</ul>
</li>
</ul>
</li>
<li>3.5インチディスプレイ(App プレビュー(1枚) / スクリーンショット(5枚))

<ul>
<li>72 dpi, RGB, flattened, no transparency</li>
<li>High-quality JPEG or PNG image file format</li>
<li>Any of the following sizes:

<ul>
<li>640 x 920 pixels for hi-res portrait (without status bar) minimum</li>
<li>640 x 960 pixels for hi-res portrait (full screen) maximum</li>
<li>960 x 600 pixels for hi-res landscape (without status bar) minimum</li>
<li>960 x 640 pixels for hi-res landscape (full screen) maximum</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p><img src="https://monosnap.com/file/vJ3VbzFkAfmhyYocoogIO343pmLpZK.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/GhF8DbfUculAL7fEFcDHkFE27zfhh3.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/yTh8YX221tKUiHkLbrypQL9yJlWpXM.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/Ioi3mDx6cI07SZNyKQjva6AsHlxlKe.png" alt="Alt text" /><br>
<img src="https://monosnap.com/file/KYltYTL3Takh69RnoQVLkTA8lazHaR.png" alt="Alt text" /><br>
iOSはプレビューとスクリーンショット以外にはそんなに難しくはないので早めに終わらせるが、審査はAndroidが1日で終わる反面iOSは一週間くらいかかるし、審査も厳しくてよくrejectされる</p>

<h2>追記</h2>

<ul>
<li>Reject

<ul>
<li>私の場合はセーフティーの項目にリジェクトされた。ソーシャル、コミュニティ系のアプリはユーザへのセーフティメカニズムが必要らしい。アップルからのメッセージは

<ul>
<li>不快なコンテンツをフィルタリングするための方法。</li>
<li>不快なコンテンツのユーザーのためのメカニズム。</li>
<li>不正なユーザをブロックするためのメカニズム。</li>
<li>開発者は、不快なコンテンツを削除し、問題のあるコンテンツを提供するユーザーを吐出することにより、24時間以内に好ましくないコンテンツレポートに行動しなければなりません。</li>
</ul>
</li>
</ul>
</li>
<li>解決

<ul>
<li>特定のユーザへのブロック機能を入れることで解決できた</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/19/android-camera-gallery/">Androidでカメラ＆ギャラリーの使い方</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-19T14:51:05+09:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:51 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>はじめに</h2>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<p>今回のinuckのアプリでファイルアップロードのためにカメラやギャラリーの機能を使って、Android側でも対応することになりましたので情報をまとめました。</p>

<h2>説明</h2>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<p>Android 4.4に変わってからWebviewはChromium基盤として変更されたため、WebviewにもMobile Chrome Browserと同じようなレベルのパフォーマンスを持って最新HTML5やCSS3のWeb標準をサポートし、V8 Javascript エンジンを乗せた最新バージョンに適用しました。<br>
なので、Webviewのパフォーマンスについて色んな変更が発生され、ここで話すファイルアップロードについた部分も適用されました。
ここには4.4以外のバージョンをまとめます。</p>

<h2>権限</h2>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);">


<h3>AndroidManifest.xml</h3>

<p>まず、Permissionを設定します。<br>
カメラとギャラリーを使うためには<br>
この三つが必要です。<br></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.CAMERA&quot;</span><span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="o">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>この三つをAndroidManifestに入れます。<br></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">?&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">manifest</span> <span class="nl">xmlns:</span><span class="n">android</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>    <span class="n">package</span><span class="o">=</span><span class="s">&quot;jp.inuck.inuckapp&quot;</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.INTERNET&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.CAMERA&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">application</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">allowBackup</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">icon</span><span class="o">=</span><span class="s">&quot;@mipmap/ic_launcher&quot;</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;@string/app_name&quot;</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">supportsRtl</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">theme</span><span class="o">=</span><span class="s">&quot;@style/AppTheme&quot;</span>
</span><span class='line'>        <span class="nl">android:</span><span class="n">minSdkVersion</span><span class="o">=</span><span class="s">&quot;8&quot;</span>
</span><span class='line'>        <span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="n">activity</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;.MainActivity&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>                <span class="o">&lt;</span><span class="n">action</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>                <span class="o">&lt;</span><span class="n">category</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>            <span class="o">&lt;/</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;/</span><span class="n">activity</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="n">service</span>
</span><span class='line'>            <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;.MyFirebaseMessagingService&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>                <span class="o">&lt;</span><span class="n">action</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;com.google.firebase.MESSAGING_EVENT&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>            <span class="o">&lt;/</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;/</span><span class="n">service</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="n">service</span>
</span><span class='line'>            <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;.MyFirebaseInstanceIDService&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>                <span class="o">&lt;</span><span class="n">action</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;com.google.firebase.INSTANCE_ID_EVENT&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>            <span class="o">&lt;/</span><span class="n">intent</span><span class="o">-</span><span class="n">filter</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;/</span><span class="n">service</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="n">application</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;/</span><span class="n">manifest</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Android 6.0になってからPermissionについて変わりまして6.0の前まではAndroidManifestに設定したら勝手に権限をとることになったんですが、6.0からは直接確認しないと権限が取れないところがありましてそのセッティングは相当めんどくさいので<br>
私の場合はTedPermissionというライブラリを使いました。<br>
ライブラリを使いたいなら下のようにbundle.gradleに設定したら良いです。
<img src="https://monosnap.com/file/f8JmmzE2Fqy1PFuJ8luT7m2dycRNjh.png" alt="Alt text" /></p>

<h2>4.4以外 <small><small>（Android Version &lt; 3.0&nbsp;&nbsp;/&nbsp;&nbsp;3.0 &lt;= Android Version &lt; 4.1&nbsp;&nbsp;/&nbsp;&nbsp;4.1 &lt;= Android Version &lt; 4.4&nbsp;&nbsp;/&nbsp;&nbsp;Android Version 5.0+）</small></small></h2>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);"><br>


<h3>共通で使うメソッド</h3>

<p><br></p>

<h4>imageChooser()</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">imageChooser</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">takePictureIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">ACTION_IMAGE_CAPTURE</span><span class="o">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">takePictureIntent</span><span class="o">.</span><span class="na">resolveActivity</span><span class="o">(</span><span class="n">getContext</span><span class="o">().</span><span class="na">getPackageManager</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// Create the File where the photo should go</span>
</span><span class='line'>        <span class="n">File</span> <span class="n">photoFile</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">photoFile</span> <span class="o">=</span> <span class="n">createImageFile</span><span class="o">();</span>
</span><span class='line'>            <span class="n">takePictureIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;PhotoPath&quot;</span><span class="o">,</span> <span class="n">mCameraPhotoPath</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// Error occurred while creating the File</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span> <span class="s">&quot;Unable to create Image File&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Continue only if the File was successfully created</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">photoFile</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">mCameraPhotoPath</span> <span class="o">=</span> <span class="s">&quot;file:&quot;</span><span class="o">+</span><span class="n">photoFile</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">();</span>
</span><span class='line'>            <span class="n">takePictureIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">EXTRA_OUTPUT</span><span class="o">,</span>
</span><span class='line'>                    <span class="n">Uri</span><span class="o">.</span><span class="na">fromFile</span><span class="o">(</span><span class="n">photoFile</span><span class="o">));</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">takePictureIntent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">contentSelectionIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_GET_CONTENT</span><span class="o">);</span>
</span><span class='line'>    <span class="n">contentSelectionIntent</span><span class="o">.</span><span class="na">addCategory</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">CATEGORY_OPENABLE</span><span class="o">);</span>
</span><span class='line'>    <span class="n">contentSelectionIntent</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="n">TYPE_IMAGE</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Intent</span><span class="o">[]</span> <span class="n">intentArray</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">takePictureIntent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">intentArray</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">[]{</span><span class="n">takePictureIntent</span><span class="o">};</span>
</span><span class='line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">intentArray</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">chooserIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_CHOOSER</span><span class="o">);</span>
</span><span class='line'>    <span class="n">chooserIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">EXTRA_INTENT</span><span class="o">,</span> <span class="n">contentSelectionIntent</span><span class="o">);</span>
</span><span class='line'>    <span class="n">chooserIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">EXTRA_TITLE</span><span class="o">,</span> <span class="s">&quot;Image Chooser&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">chooserIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">EXTRA_INITIAL_INTENTS</span><span class="o">,</span> <span class="n">intentArray</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">chooserIntent</span><span class="o">,</span> <span class="n">INPUT_FILE_REQUEST_CODE</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br></p>

<h4>createImageFile()</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">File</span> <span class="nf">createImageFile</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// Create an image file name</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyyMMdd_HHmmss&quot;</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nf">Date</span><span class="o">());</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">imageFileName</span> <span class="o">=</span> <span class="s">&quot;JPEG_&quot;</span> <span class="o">+</span> <span class="n">timeStamp</span> <span class="o">+</span> <span class="s">&quot;_&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="n">File</span> <span class="n">storageDir</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStoragePublicDirectory</span><span class="o">(</span>
</span><span class='line'>            <span class="n">Environment</span><span class="o">.</span><span class="na">DIRECTORY_PICTURES</span><span class="o">);</span>
</span><span class='line'>    <span class="n">File</span> <span class="n">imageFile</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="na">createTempFile</span><span class="o">(</span>
</span><span class='line'>            <span class="n">imageFileName</span><span class="o">,</span>  <span class="cm">/* prefix */</span>
</span><span class='line'>            <span class="s">&quot;.jpg&quot;</span><span class="o">,</span>         <span class="cm">/* suffix */</span>
</span><span class='line'>            <span class="n">storageDir</span>      <span class="cm">/* directory */</span>
</span><span class='line'>    <span class="o">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">imageFile</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br></p>

<h4>onActivityResult (int, int, Intent)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onActivityResult</span> <span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">INPUT_FILE_REQUEST_CODE</span> <span class="o">&amp;&amp;</span> <span class="n">resultCode</span> <span class="o">==</span> <span class="n">getActivity</span><span class="o">().</span><span class="na">RESULT_OK</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">LOLLIPOP</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">filePathCallbackLollipop</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
</span><span class='line'>                <span class="k">return</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>            <span class="n">Uri</span><span class="o">[]</span> <span class="n">results</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Uri</span><span class="o">[]{</span><span class="n">getResultUri</span><span class="o">(</span><span class="n">data</span><span class="o">)};</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">filePathCallbackLollipop</span><span class="o">.</span><span class="na">onReceiveValue</span><span class="o">(</span><span class="n">results</span><span class="o">);</span>
</span><span class='line'>            <span class="n">filePathCallbackLollipop</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">filePathCallbackNormal</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
</span><span class='line'>                <span class="k">return</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>            <span class="n">Uri</span> <span class="n">result</span> <span class="o">=</span> <span class="n">getResultUri</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span> <span class="s">&quot;openFileChooser : &quot;</span><span class="o">+</span><span class="n">result</span><span class="o">);</span>
</span><span class='line'>            <span class="n">filePathCallbackNormal</span><span class="o">.</span><span class="na">onReceiveValue</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
</span><span class='line'>            <span class="n">filePathCallbackNormal</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">mFilePathCallback</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">mFilePathCallback</span><span class="o">.</span><span class="na">onReceiveValue</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">filePathCallbackNormal</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">filePathCallbackNormal</span><span class="o">.</span><span class="na">onReceiveValue</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span><span class='line'>        <span class="n">mFilePathCallback</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="n">filePathCallbackNormal</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br></p>

<h4>getResultUri(Intent)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">Uri</span> <span class="nf">getResultUri</span><span class="o">(</span><span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Uri</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span><span class="o">(</span><span class="n">data</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">TextUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getDataString</span><span class="o">()))</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// If there is not data, then we may have taken a photo</span>
</span><span class='line'>        <span class="k">if</span><span class="o">(</span><span class="n">mCameraPhotoPath</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">result</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">mCameraPhotoPath</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">LOLLIPOP</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">filePath</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getDataString</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">filePath</span> <span class="o">=</span> <span class="s">&quot;file:&quot;</span> <span class="o">+</span> <span class="n">RealPathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="n">getContext</span><span class="o">(),</span> <span class="n">data</span><span class="o">.</span><span class="na">getData</span><span class="o">());</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="n">result</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br></p>

<h3>バージョン別</h3>

<p><br><strong>
1. Android Version 5.0+<br></strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onShowFileChooser</span><span class="o">(</span><span class="n">WebView</span> <span class="n">webView</span><span class="o">,</span>
</span><span class='line'>                                 <span class="n">ValueCallback</span><span class="o">&lt;</span><span class="n">Uri</span><span class="o">[]&gt;</span> <span class="n">filePathCallback</span><span class="o">,</span> <span class="n">FileChooserParams</span> <span class="n">fileChooserParams</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;WebViewActivity A&gt;5, OS Version : &quot;</span> <span class="o">+</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">+</span> <span class="s">&quot;\t onSFC(WV,VCUB,FCP), n=3&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">filePathCallbackLollipop</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">filePathCallbackLollipop</span><span class="o">.</span><span class="na">onReceiveValue</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="n">filePathCallbackLollipop</span> <span class="o">=</span> <span class="n">filePathCallback</span><span class="o">;</span>
</span><span class='line'>    <span class="n">imageChooser</span><span class="o">();</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br><strong>
2. 4.1 &lt;= Android Version &lt; 4.4<br></strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">openFileChooser</span><span class="o">(</span><span class="n">ValueCallback</span><span class="o">&lt;</span><span class="n">Uri</span><span class="o">&gt;</span> <span class="n">uploadFile</span><span class="o">,</span> <span class="n">String</span> <span class="n">acceptType</span><span class="o">,</span> <span class="n">String</span> <span class="n">capture</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span> <span class="s">&quot;openFileChooser : &quot;</span><span class="o">+</span><span class="n">acceptType</span><span class="o">+</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">capture</span><span class="o">);</span>
</span><span class='line'>    <span class="n">filePathCallbackNormal</span> <span class="o">=</span> <span class="n">uploadFile</span><span class="o">;</span>
</span><span class='line'>    <span class="n">imageChooser</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br><strong>
3. 3.0 &lt;= Android Version &lt; 4.1<br></strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">openFileChooser</span><span class="o">(</span><span class="n">ValueCallback</span><span class="o">&lt;</span><span class="n">Uri</span><span class="o">&gt;</span> <span class="n">uploadMsg</span><span class="o">,</span> <span class="n">String</span> <span class="n">acceptType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//System.out.println(&quot;WebViewActivity 3&lt;A&lt;4.1, OS Version : &quot; + Build.VERSION.SDK_INT + &quot;\t openFC(VCU,aT), n=2&quot;);</span>
</span><span class='line'>    <span class="n">filePathCallbackNormal</span> <span class="o">=</span> <span class="n">uploadFile</span><span class="o">;</span>
</span><span class='line'>    <span class="n">imageChooser</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br><strong>
4. Android Version &lt; 3.0<br></strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">openFileChooser</span><span class="o">(</span><span class="n">ValueCallback</span><span class="o">&lt;</span><span class="n">Uri</span><span class="o">&gt;</span> <span class="n">uploadMsg</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//System.out.println(&quot;WebViewActivity OS Version : &quot; + Build.VERSION.SDK_INT + &quot;\t openFC(VCU), n=1&quot;);</span>
</span><span class='line'>    <span class="n">filePathCallbackNormal</span> <span class="o">=</span> <span class="n">uploadMsg</span><span class="o">;</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_GET_CONTENT</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">addCategory</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">CATEGORY_OPENABLE</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="n">TYPE_IMAGE</span><span class="o">);</span>
</span><span class='line'>    <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">INPUT_FILE_REQUEST_CODE</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br></p>

<h2>テスト</h2>

<hr style="border-top: solid 1px rgba(128, 128, 128, 0.2); border-bottom: solid 1px rgba(128, 128, 128, 0.2);"><br>


<p><br><strong>
1. Android 6.0<br></strong><br>
<img src="https://monosnap.com/file/i4St10LZC6hGt5xvI8PecmQMXk0tcd.png" style="width: 50%; float: left;">
<img src="https://monosnap.com/file/EfhnOQcLSkzNMxOj1wQB7yZlF9kzs6.png" style="width: 50%;">
<br><strong><br>
2. Android 5.1<br></strong><br>
<img src="https://monosnap.com/file/mcgXOTDiBcfMMPGsPr31GvBQrDiCME.png" style="width: 50%; float: left;">
<img src="https://monosnap.com/file/HHnJECNfOfRm9mx3gMDuofUXUfNzDC.png" style="width: 50%;">
<br><strong><br>
3. Android 4.2<br></strong><br>
<img src="https://monosnap.com/file/rpTQ1JSdrqyULk7VMhACNKqxFctp1s.png" style="width: 50%; float: left;">
<img src="https://monosnap.com/file/wGalecUVjVX5q0GVkpxYQcAfj3s6Ua.png" style="width: 50%;"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/05/usewebview/">WebViewの作り方＆JavascriptInterface</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-05T03:26:21+09:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:26 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>WebViewを作る</h2>

<p>まず、プロジェクトを作ってみましょう。
<img src="https://monosnap.com/file/zcNSh0T9E0IGr4sn6I2U49nvDsoynb.png"><br>
下のようにアップ名とカンパニーのdomainを入力したらそれの組み合わせでPackage名が決められます。<br>
<img src="https://monosnap.com/file/91DKw5Dxrq0xjpfwaquLb4kuVKKemp.png"><br>
ターゲットのデバイスとこのアプリで使える最小のSDKを選びます。<br>
<img src="https://monosnap.com/file/4uxXhAHZghjDddHRlqRhj6Qq7AcYgw.png"><br>
Activityを選びます。Activityは該当アプリの使い方によって選んだら良いです。<br>
<img src="https://monosnap.com/file/Mw7gGujs6eGDf9SeMocpsvTBltFe1f.png"><br>
最後にActivityとLayoutの名前をついてFinishをクリックするとアプリが生成できます。<br>
<img src="https://monosnap.com/file/3S16TCQNnA2lr2UEARc6uYXAmJtRPl.png"><br>
初めての画面です。MainActivityはアプリが起動されるときのStartPointになるところです。<br>
<img src="https://monosnap.com/file/R4LbMH5L6yChRGXjrOjw0mvoYlX0mg.png"><br>
次はLayoutですが、下のactivity_main.xmlというものがMainActivityのLayoutになり、MainActivityはこのLayoutを通してデバイスの画面に表せます。<br>
<img src="https://monosnap.com/file/naq9yOnw5K0Nz7FlucQVKQHDdVQX2P.png"><br>
Fragmentを使うためにこのLayoutはFrameLayoutにします。<br>
<img src="https://monosnap.com/file/gvI1KUjyuBClK3rCMqMVvhBpj7Hebh.png"><br>
では、Fragmentファイルを作ります。該当のPackageに右クリック-> New -> Java Class にして新しいJava Classを生成します。<br>
<img src="https://monosnap.com/file/RbJPARbQwh4GE5XjXO1BvWUuZczhqO.png"><br>
<img src="https://monosnap.com/file/AJoWo66RzT8vI7tdgWHR7AYpR5oJgn.png"><br>
上のように生成されたらそのClassの中身にコードを入れてみましょう。<br></p>

<p><div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">public</span>&nbsp;<span style="color:#ff3399">class</span>&nbsp;MainFragment&nbsp;<span style="color:#ff3399">extends</span>&nbsp;Fragment&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">private</span>&nbsp;<span style="color:#ff3399">static</span>&nbsp;<span style="color:#ff3399">final</span>&nbsp;<span style="color:#4be6fa">String</span>&nbsp;TAG&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;MainFragment.<span style="color:#ff3399">class</span>.getSimpleName();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">private</span>&nbsp;WebView&nbsp;mWebView;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">public</span>&nbsp;MainFragment()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;@Override</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">public</span>&nbsp;View&nbsp;onCreateView(LayoutInflater&nbsp;inflater,&nbsp;ViewGroup&nbsp;container,&nbsp;Bundle&nbsp;savedInstanceState)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;View&nbsp;rootView&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;inflater.inflate(R.layout.fragment_main,&nbsp;container,&nbsp;<span style="color:#c10aff">false</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mWebView&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;(WebView)&nbsp;rootView.findViewById(R.id.fragment_main_webview);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setUpWebViewDefaults(mWebView);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mWebView.setWebChromeClient(<span style="color:#ff3399">new</span>&nbsp;WebChromeClient(){</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">public</span>&nbsp;<span style="color:#4be6fa">boolean</span>&nbsp;onCreateWindow(WebView&nbsp;view,&nbsp;<span style="color:#4be6fa">boolean</span>&nbsp;isDialog,&nbsp;<span style="color:#4be6fa">boolean</span>&nbsp;isUserGesture,&nbsp;Message&nbsp;resultMsg)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#ff3399">super</span>.onCreateWindow(view,&nbsp;isDialog,&nbsp;isUserGesture,&nbsp;resultMsg);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>(mWebView.getUrl()&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#4be6fa">null</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mWebView.loadUrl(<span style="color:#ffd500">&ldquo;<a href="https://www.google.co.jp">https://www.google.co.jp</a>&rdquo;</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;rootView;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;@TargetApi(Build.VERSION_CODES.HONEYCOMB)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">private</span>&nbsp;<span style="color:#ff3399">void</span>&nbsp;setUpWebViewDefaults(WebView&nbsp;webView)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSettings&nbsp;settings&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;webView.getSettings();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Enable&nbsp;Javascript</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.setJavaScriptEnabled(<span style="color:#c10aff">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Use&nbsp;WideViewport&nbsp;and&nbsp;Zoom&nbsp;out&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;viewport&nbsp;defined</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.setUseWideViewPort(<span style="color:#c10aff">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.setLoadWithOverviewMode(<span style="color:#c10aff">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Enable&nbsp;pinch&nbsp;to&nbsp;zoom&nbsp;without&nbsp;the&nbsp;zoom&nbsp;buttons</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.setBuiltInZoomControls(<span style="color:#c10aff">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>(Build.VERSION.SDK_INT&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;Build.VERSION_CODES.HONEYCOMB)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Hide&nbsp;the&nbsp;zoom&nbsp;controls&nbsp;for&nbsp;HONEYCOMB+</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.setDisplayZoomControls(<span style="color:#c10aff">false</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Enable&nbsp;remote&nbsp;debugging&nbsp;via&nbsp;chrome://inspect</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>(Build.VERSION.SDK_INT&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;Build.VERSION_CODES.KITKAT)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebView.setWebContentsDebuggingEnabled(<span style="color:#c10aff">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;We&nbsp;set&nbsp;the&nbsp;WebViewClient&nbsp;to&nbsp;ensure&nbsp;links&nbsp;are&nbsp;consumed&nbsp;by&nbsp;the&nbsp;WebView&nbsp;rather</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;than&nbsp;passed&nbsp;to&nbsp;a&nbsp;browser&nbsp;if&nbsp;it&nbsp;can</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mWebView.setWebViewClient(<span style="color:#ff3399">new</span>&nbsp;WebViewClient());</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"></td></tr></table></div>
このFragmentにWebViewを入れ込むのでLayoutを作ります。<br>
<img src="https://monosnap.com/file/mlvo7dFMsH9ufCb2WFrUvcP2hqRZ74.png"><br>
<img src="https://monosnap.com/file/TBmAs5ZoSs9GK5jfd5KOt0OtjZ3Yac.png"><br>
下のようにWebViewのコードを入れてみます。<br>
<img src="https://monosnap.com/file/p1XkTbYVu9uzZpYLOueM7BtKI1cYPh.png"><br>
InternetのPermissionを取ります。<br>
<img src="https://monosnap.com/file/LOFKZuqf5LvMvBymESQ6TacdqTkwue.png"><br>
すると、<br>
<img src="https://monosnap.com/file/nnbEyiIdhIvfZEi4Oud5HicjJ3Qdth.png" style="width: 60%;"><br></p>

<h2>JavascriptInterface</h2>

<p>WebViewを通してJSとNative間のConnectingができます。
<img src="https://monosnap.com/file/8Ois8MsX22mqIYtoBLPkP6TVEDnVit.png"><br>
上の設定を説明します。<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">getSettings().setJavaScriptEnabled(<span style="color:#c10aff">true</span>);</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>
これは文字そのとおりWebViewでJavascriptを使えるようになるものです。<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">addJavascriptInterface(<span style="color:#ff3399">new</span>&nbsp;AndroidBridge(),&nbsp;<span style="color:#ffd500">&ldquo;HybridApp&rdquo;</span>);</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>
これはWebViewにJavascriptInterfaceを追加するもので、前の引数は実行するNative側のClassで、後ろの引数はJSから呼ぶときに使うキーです。<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">String</span>&nbsp;userAgent&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;mWebView.getSettings().getUserAgentString();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mWebView.getSettings().setUserAgentString(userAgent&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#ffd500">&ldquo;&nbsp;inuckapp&rdquo;</span>);</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>
次はUserAgentの設定です。UserAgentを設定したら特定なアプリだけで呼ばれ、他のアプリやMobileブラウザーで無駄に呼ばれるのを止められます。<br>
続いてJSから呼ばれるClassをみてみると、<br>
<img src="https://monosnap.com/file/f2CqycMqiYP3ibV8WoxaXQDWG1QC8K.png"><br>
inuckapp()というメソッドを呼ぶことにします。ではinuckapp()の上にJavascriptInterfaceというAnotationを必ずつけなきゃいけないです。<br>
Native側からもJSのメソッドを呼ぶことができます。それはloadUrl()を使って、javascript:[メソッド名]を引数として入れます。<br>
次はサーバ側です。<br>
<img src="https://monosnap.com/file/QoWbqLzvAvpcc4RchSKy82g1zMOSfk.png"><br>
navigator.userAgentを使ってどんなデバイスかを取得します。<br>
Androidは「window.設定したキー.メソッド名」で簡単に呼べます。<br>
さて、JS側のgoodMorning()を呼んでみます。<br>
<img src="https://monosnap.com/file/Y6QmlWB0RRtC5BhQaZZywsOiPjdISl.png"><br>
テストのため、ボタンを入れてみました。<br>
<img src="https://monosnap.com/file/NGUC5bwtGl8R87difLA0iLsstM7WFk.png" style="width: 60%;"><br>
ボタンをクリックすると、<br>
<img src="https://monosnap.com/file/ZQCroY61ga4fL9aBVmj949AJ0wnvTn.png" style="width: 60%;"><br>
JS側のメソッドが実行になり、Alertが出ました。<br>
では、Native側からもデータを送ってみます。<br>
メソッドの引数として渡すことができます。<br>
<img src="https://monosnap.com/file/EHiux9F55evd7z4K5osc5FaZ9YXgwE.png"><br>
すると、<br>
<img src="https://monosnap.com/file/1Z8xXibNxUInayOurjwYlV7YNBRotu.png" style="width: 60%;"><br>
Native側からJSにデータが送信されたのが確認できます。<br></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/28/sessionmanagement/">Railsにおけるセッション管理</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-28T14:09:14+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:09 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>セッションとは</h2>

<h2>セッションを設定</h2>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">class</span>&nbsp;LoginsController&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;ApplicationController</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;ログインする</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;create</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;user&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;User.authenticate(params[:username],&nbsp;params[:password])</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">#&nbsp;ユーザーIDをセッションに保存する</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session[:user_id]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;user.id</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_to&nbsp;root_url</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<h2>セッションを取得</h2>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">class</span>&nbsp;ApplicationController&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;ActionController::Base</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;private</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">#&nbsp;現在のユーザーを取得する</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">#&nbsp;@_current_userが空の場合は、session情報をキーにしてDBから検索する</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;current_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@_current_user&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span><span style="color:#0086b3"></span><span style="color:#ff3399">|</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;User.find_by(id:&nbsp;session[:user_id])</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td></tr></table></div>


<h2>セッションを削除する</h2>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">class</span>&nbsp;LoginsController&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;ApplicationController</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;ログアウトする</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;destroy</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">#&nbsp;@_current_userの値をnilにする</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;@_current_user&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">nil</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;reset_session</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;redirect_to&nbsp;root_url</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td></tr></table></div>


<h2>Railsのセッション管理方法</h2>

<h4>CookieStore</h4>

<h4>ActiveRecordSessionStore</h4>

<h4>DalliStore</h4>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/21/about-gem/">Gemの作り方</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-21T15:36:47+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>3:36 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Gemとは</h2>

<p>言語によってそれぞれ使用しやすい方式で作ったものを提供させています。それをライブラリ、またはフレームワークといいます。RailsがフレームワークだとしたらGemはライブラリです。つまり、必要な機能がある場合追加して使用したら良いです。<br>
基本的にオープンソースとしてディストリビューションされていて、誰でも検索し、使用法を調べて使用したら良いです。</p>

<h3>例え</h3>

<h5>devise</h5>

<p>会員登録やログインシステムのためによく使われるGemのdeviseを例に取ってみます。<br>
まず、<b><a href="https://rubygems.org">https://rubygems.org</a><b>でdeviseを検索してみると、<br>
<img src="https://monosnap.com/file/roucgQ03rPFDUOeMncRDbc4VVGOdDK.png"><br>
上記のように色んなバージョンにできています。その中で自分がインストールしたいバージョンを選んでインストールしたら良いです。<br>
次はgithubで検索してみると、<br>
<img src="https://monosnap.com/file/fdvk59gCh6h2InQQG0Prc7828IcOqH.png"><br>
<img src="https://monosnap.com/file/loOJDPdGcmpoqEGt9DltZwmrBMCPYD.png"><br>
全てのGemはこのようにソースコードと使い方を公開しています。<br></p>

<h2>　作り方</h2>

<p>さて、本格的にGemの作り方を見てみましょう。<br>
Gemの作り方は以外と簡単です。<br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;gem&nbsp;「Gem名」</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p>こういうふうにすると下のように作成ができます。<br>
<img src="https://monosnap.com/file/JcBC289LEHlEjtc4liLqoqc9Rpn8MY.png"><br>
作成が終わったらディレクトリの中にlibフォルダーが確認できます。<br>
<img src="https://monosnap.com/file/nIIEjjx6RXpYs3F7zSwRoUcRFTfM58.png"><br>
この場合、hello_system_team.rbが本体になり、このGemをrequireすると、最初にこのファイルが呼ばれ、次にこのファイルでrequireしているものが呼ばれるという形になります。<br>
version.rbは単純にGemのバージョン管理に必要なファイルです。<br>
まず、hello_system_team.rbをみると、</p>

<p><div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">require</span>&nbsp;<span style="color:#ffd500">&ldquo;hello_system_team/version&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">module</span>&nbsp;HelloSystemTeam</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;Your&nbsp;code&nbsp;goes&nbsp;here&hellip;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"></td></tr></table></div>
こうなっていますが<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">def</span>&nbsp;self.exec</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#4be6fa">puts</span>&nbsp;<span style="color:#ffd500">&ldquo;Hello&nbsp;System-Team!&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>
moduleの中にこれを入れます。上記のメソッドは例えなので実際に実行したいメソッドを入れたら良いです。
後はディレクトリの中にあるhello_system_team.gemspecの設定を変更します。<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;coding:&nbsp;utf-8</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">lib&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;File.expand_path(<span style="color:#ffd500">&lsquo;../lib&rsquo;</span>,&nbsp;<strong>FILE</strong>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">$LOAD_PATH.unshift(lib)&nbsp;<span style="color:#ff3399">unless</span>&nbsp;$LOAD_PATH.include?(lib)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">require</span>&nbsp;<span style="color:#ffd500">&lsquo;hello_system_team/version&rsquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">Gem::Specification.<span style="color:#ff3399">new</span>&nbsp;<span style="color:#ff3399">do</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>spec<span style="color:#0086b3"></span><span style="color:#ff3399">|</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;hello_system_team&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;HelloSystemTeam::VERSION</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.authors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;jo&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;<a href="&#109;&#x61;&#x69;&#x6c;&#116;&#x6f;&#58;&#102;&#x61;&#x6e;&#116;&#97;&#115;&#116;&#105;&#99;&#x6a;&#x79;&#x63;&#64;&#103;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;">&#102;&#x61;&#x6e;&#116;&#97;&#115;&#116;&#x69;&#99;&#106;&#x79;&#x63;&#64;&#x67;&#109;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;</a>&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.summary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;%q{TODO:&nbsp;Write&nbsp;a&nbsp;short&nbsp;summary,&nbsp;because&nbsp;Rubygems&nbsp;requires&nbsp;one.}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.description&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;%q{TODO:&nbsp;Write&nbsp;a&nbsp;longer&nbsp;description&nbsp;<span style="color:#ff3399">or</span>&nbsp;delete&nbsp;this&nbsp;line.}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.homepage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;TODO:&nbsp;Put&nbsp;your&nbsp;gem&rsquo;s&nbsp;website&nbsp;or&nbsp;public&nbsp;repo&nbsp;URL&nbsp;here.&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.license&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;MIT&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;Prevent&nbsp;pushing&nbsp;this&nbsp;gem&nbsp;to&nbsp;RubyGems.org.&nbsp;To&nbsp;allow&nbsp;pushes&nbsp;either&nbsp;set&nbsp;the&nbsp;&lsquo;allowed_push_host&rsquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;to&nbsp;allow&nbsp;pushing&nbsp;to&nbsp;a&nbsp;single&nbsp;host&nbsp;or&nbsp;delete&nbsp;this&nbsp;section&nbsp;to&nbsp;allow&nbsp;pushing&nbsp;to&nbsp;any&nbsp;host.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;spec.respond_to?(:metadata)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;spec.metadata[<span style="color:#ffd500">&lsquo;allowed_push_host&rsquo;</span>]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;TODO:&nbsp;Set&nbsp;to&nbsp;&lsquo;<a href="http://mygemserver.com">http://mygemserver.com</a>&rsquo;&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">else</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">raise</span>&nbsp;<span style="color:#ffd500">&ldquo;RubyGems&nbsp;2.0&nbsp;or&nbsp;newer&nbsp;is&nbsp;required&nbsp;to&nbsp;protect&nbsp;against&nbsp;public&nbsp;gem&nbsp;pushes.&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<code>git&amp;nbsp;ls&lt;span style="color:#0086b3"&gt;&lt;/span&gt;&lt;span style="color:#ff3399"&gt;-&lt;/span&gt;files&amp;nbsp;&lt;span style="color:#0086b3"&gt;&lt;/span&gt;&lt;span style="color:#ff3399"&gt;-&lt;/span&gt;z</code>.split(<span style="color:#ffd500">&ldquo;\x0&rdquo;</span>).reject&nbsp;{&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>f<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>&nbsp;f.match(%r{^(test<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>spec<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>features)<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>})&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.bindir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;exe&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.executables&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;spec.files.grep(%r{^exe<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>})&nbsp;{&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>f<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>&nbsp;File.basename(f)&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.require_paths&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;lib&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;bundler&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;1.12&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;rake&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;10.0&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;rspec&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;3.0&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"></td></tr></table></div>
正しく変更できない場合はエラーが出てきます。僕の場合はsummary, description, homepage, metadataでエラーが出てきました。（泣）<br><br>
そこまでできると、実行してみましょう。irbで実行してみたら下のようにうまくできます。<br>
でも、複雑なGemになってくるとirbだけでは難しくなってきますのでその時ちゃんとテストを行うのが良いです。<br>
<img src="https://monosnap.com/file/h5kTn3dIfmOWVSLwOH9VN8MqkNC40D.png"><br>
<img src="https://monosnap.com/file/XKh2f66LFf1eqPwR0d2nvNWkjfhxhF.png"><br>
無事にテストまでできればBuildとPushをします。<br>
<img src="https://monosnap.com/file/8gExpFLiFE3bp3aSETRDbMr2ve8HWl.png"><br>
<img src="https://monosnap.com/file/DQvQmAEby99zCjsm78cthxoP9eYtuY.png"><br>
そして、Gemを検索してみると出てきますね！<br>
<img src="https://monosnap.com/file/XSuEglI37Wj3JrGewJpA5snRgZP1xJ.png"><br>
他のプロジェクトでこのGemをインストールしたらGemに入っているメソッドを使うことができます。
<img src="https://monosnap.com/file/0Xs0Nkdr239XWyr1jrqy3iYNV6XAsr.png"><br></p>

<h2>参照</h2>

<p><small>
<a href="http://qiita.com/takashi/items/672781ed1b6255303381">http://qiita.com/takashi/items/672781ed1b6255303381</a>
</small>
<br><br><br></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/07/ios-webview/">iOS Webviewのまとめ</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-07T15:21:16+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:21 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Project 作成</h3>

<p>まずプロジェクトを作成します。<br>
<img src="https://www.evernote.com/l/Aj-3dSPSUctGQKIqs055VX_XEZPnNlR0MMYB/image.png" /><br>
<img src="https://www.evernote.com/l/Aj-pEsLUGBtG15Vjvd1lC9sQ7UFtz0Rsm7wB/image.png" /><br></p>

<h3>Webviewを入れ込む</h3>

<p><img src="https://www.evernote.com/l/Aj8g5xqFJHNBhofYe02KBDokRoUWEeh8qWwB/image.png" /><br>
プロジェクトが作成できると上の写真のようにMain.storyboardが作られてます。右側の下のところにあるobject liblaryでWebviewを探してview controllerに入れ込みます。<br>
<img src="https://www.evernote.com/l/Aj-NLrtHcw9J1quIgvhSvv-6XmlxEY26UD8B/image.png" /><br>
右側の上の方にあるassistant editorをクリックすると下のように画面が分けられてWebviewをオブジェクト化しやすくなります。<br>
<img src="https://www.evernote.com/l/Aj-wZ8hGHSNM9L6hJYnlLQr8Y6lEKvypu9AB/image.png" /><br>
<img src="https://www.evernote.com/l/Aj86fjzYepJHYKLdbDXNojr9Rd9GwnJS1_4B/image.png" /><br>
名前を作成したら、<br>
<img src="https://www.evernote.com/l/Aj8EwHqIebpEmo8g3LWqX2R9P6Z1U6hMp5cB/image.png" /><br>
その名前を持つオブジェクトが作れます。<br></p>

<h3>Webviewの設定</h3>

<p><img src="https://www.evernote.com/l/Aj-4IidQy9tM2akZ6EQXUrGZoT742mKP8OgB/image.png" /><br>
上のようにWebviewを設定してURLをロードします。<br>
delegateを指定しないとエラーになるので必ず入力します。そしてloadRequestメソッドを使ってURLを読み込みます。<br>
<img src="https://www.evernote.com/l/Aj9oN5HjMUdAWb-eyGCUtNWD1EjNrdaL4JwB/image.png" /><br>
Webviewのlayoutを指定して、<br>
<img src="https://www.evernote.com/l/Aj946gcePApPK6zNRxbl2EDeIR7E_Su1ErwB/image.png" /><br>
デバイスを選択し、runすると、<br>
<img src="https://www.evernote.com/l/Aj_0gcm7p5BLapIRAH4RPkySEbI2IS741VYB/image.png" style="width: 50%;" /><br>
こういうふうに起動します。<br>
単純にview controllerだけではなくてTabbar ControllerやNavigation Controllerを使うことも可能です。<br>
今回はTabbar Controllerを使ってみます。<br></p>

<h3>Tabbar Controllerの使い方</h3>

<p><img src="https://www.evernote.com/l/Aj80Vt-JCuVBh5asIYsDZM62ga5TQVsr3koB/image.png" /><br>
まず、右下のObject LibraryでTabbar Controllerを探して中に入れ込みます。<br>
<img src="https://www.evernote.com/l/Aj8jVthnKFtFMq4-8mimtjiLlRBlI0RBdKMB/image.png" /><br>
View Controllerの隣にある'->&lsquo;をEntryPointと言います。簡単にいうとアプリのスタートになるところを指定するPointです。<br>
<img src="https://www.evernote.com/l/Aj_uujrGbjVN3qZXCbEdPAugVo_mQyWOPZIB/image.png" /><br>
View ControllerにあるEntryPointをTabbar Controllerに移動します。<br>
<img src="https://www.evernote.com/l/Aj_0nHriQNZAjorF-C0aPmsAm8XXJatnaTEB/image.png" /><br>
次は、Tabbar ControllerのSegueを該当View ControllerにつないでRelationshipを作ります。<br>
<img src="https://monosnap.com/file/ZSHIOPqrBkqscUoRN89VfXV9sAT8d5.png"><br>
そしたら上のようにView ControllerはTabbar Controllerの一つのItemとなります。<br>
<img src="https://monosnap.com/file/CzoLNql2j34gJey0Mw70el1YcRFTXU.png"><br>
Tabbar Itemを編集して名前やImageも変えることができます。右のところで編集すると、<br>
<img src="https://monosnap.com/file/Wl81tRb4VgMMVZy0GhGKuYQcJuyivE.png"><br>
簡単に変わります。<br>
デバイスで確認すると、<br>
<img src="https://monosnap.com/file/e3Ke7c7dk4nuBupiaI4PiixgTNucFg.png" style="width: 50%;"><br>
こう変わりました。<br>
<img src="https://monosnap.com/file/UWCF2Yn6KFh7IkyFxE387x6alyjU7Z.png"><br>
次は、Tabbarの色を変えてみます。Tabbarを選択し、右のところを編集すると、<br>
<img src="https://monosnap.com/file/FJfKiSGiz2UErNL9FRjSpa438b1Y8K.png"><br>
色が変わります。<br>
もう一度デバイスで確認すると、<br>
<img src="https://monosnap.com/file/yiS5jc2v16Yds9vgTXF6cOrs66vx1d.png" style="width: 50%;"><br>
こういうふうに変わるのを見ることができます。<br><br><br></p>

<p>個人的な意見では、Tabbar Controllerはそれぞれの機能を持てる画面を使用するNativeアプリにもっと合う気がします。Webviewを使うHybridアプリにはNativeアプリに使うことよりは効率性が高くないんじゃないかなと思います。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/31/Hybrid-Native-Responsive/">Hybrid, Native, Responsive</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-31T16:02:03+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>4:02 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Mobile Applicationの種類</h1>

<p><img src="/images/threeApps.jpg"><br>
1. Native Application<br>
2. Hybrid Application<br>
3. Responsive Web Application<br></p>

<h2>Native Application</h2>

<p>Native Appの開発でアプリはios, androidなどの特定のMobile Platformに合わせて作成することになり、一般的にはPlatform会社の開発道具を使用して作られます。他のPlatformにはコードの再使用はできません。<br><br></p>

<h4>メリット</h4>

<p>• 性能が高い（特にゲームの場合）<br>
<small>- グラフィックユーザーインターフェース、速度など</small><br>
• デバイスの全ての機能を使える（センサー、カメラ、連絡先など）<br>
• Appleのアップストア、GooglePlayなどの公開アップストアを通して配布<br></p>

<h4>デメリット</h4>

<p>• 開発者不足<br>
• Platform別にそれぞれアプリを作るため費用を使う<br>
• Platform別にコードベースを管理するため費用と時間を使う<br>
• 長い開発期間<br>
• 開発のかかる時間で各Platformのバージョンがそれぞれになる可能性がある<br>
• 各アップストアの承認手順を待たなきゃいけないのでアプリの配布が遅くなる可能性がある<br></p>

<h4>開発道具</h4>

<p>• Apple: XCode<br>
• Android: Android Studio, eclipse<br></p>

<h2>Responsive</h2>

<p>HTML 5, CSS, JSなどを使用して作るWeb Application。デバイスのブラウザーを通して接近できます。デバイスの機能を使用することが難しいです。<br></p>

<h4>メリット</h4>

<p>• 既存Web開発者を活用して作れる<br>
• 費用が一番安い<br>
• 一つのコードベースだけ管理する<br>
• 早く編集、アップデートや配布が可能<br></p>

<h4>デメリット</h4>

<p>• インターフェースが標準Native Appと違う可能性がある<br>
• マルチメディアの性能がよくない<br>
• デバイスの機能を使うことが難しい<br></p>

<h4>開発道具</h4>

<p>HTML 5, JS, CSSを使ってWebを作ることに使用される全ての開発道具はResponsive Web Applicationを作ることができます。<br>
• AngularJS - Googleが管理しているopen source web application framework<br>
• Ember.js - open source javascript web application framework<br>
• React - facebookが管理しているopen source javascript library<br>
• JQuery - javascript library<br>
• Bootstrap - Responsiveを優先するCSS framework<br></p>

<h2>Hybrid Application</h2>

<p>Hybrid ApplicationはResponsive AppをMobile Platformで実行するAppになります。ウェブ標準を使用するが最終アプリはデバイスでnative appで実行されます。Native AppとResponsive Appのメリットだけ合わせるように誕生した。<br></p>

<h4>メリット</h4>

<p>• ウェブ標準を使用して作る（APIやデバイスの機能に接近するためコーディングが必要<br>
• 既存ウェブ開発者を活用して開発可能<br>
• 早く編集、アップデートや配布が可能<br>
• 各PlatformでNative Appで実行する<br></p>

<h4>デメリット</h4>

<p>• インターフェースが標準Native Appと違う可能性がある<br>
• Native Appよりは性能がよくない<br>
• 一般的にデバイスの全ての機能が使えるが新たな機能は少し時間がかかる<br>
• Platformによってそれぞれ違うコードベースにしなきゃいけない<br></p>

<h4>開発道具</h4>

<p>• Apache Cordova - HTML 5, CSS, javascriptを使用しているResponsive Appを基盤にしてNative Appをbuildするopen source platform<br>
• Adobe PhoneGap - Adobeが作ったApache Cordovaの変形<br>
• Alpha Anywhere - Responsive Appを作ってそれをNative Appに配布するようにしてくれる開発環境<br>
• Ionic Framework - AngularJSやCordovaと連携してResponsive Appを基盤にしてNative Appをbuildするユーザーインターフェース中心のframework<br></p>

<h1>b#まとめ</h1>

<p><img src="/images/chart_apps.png"></p>

<p></small></p>

<h2>参照</h2>

<p><small>
<a href="http://www.itworld.co.kr/news/95791">http://www.itworld.co.kr/news/95791</a></p>

<p></small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/24/HAML%20&%20Slim/">HAML & Slim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-24T10:25:08+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:25 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>HAML (HTML Abstraction Markup Language)</h1>

<p>インラインコードを使わなくてウェブHTML文書を記述することに使用するマークアップ言語です。PHPやASP、ほとんどのRubyOnRails Applicationで使用されています。コードが簡単になる長所がありますが、デザイナーやパブリッシャーとの協業が必要なプロジェクトには使用が難しくなる短所があります。</p>

<h2>Gem HAMLのインストール</h2>

<p>HAMLのGemをプロジェクトに追加します。Gemfileを開いて、 次のコードを「追加」します。<br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;<span style="color:#ffd500">'haml-rails'</span></div></div></td></tr></table></div>


<p>そしてインストールします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;install</div></div></td></tr></table></div>


<p>これからHAMLを使えます！！</p>

<h2>書き方</h2>

<h3>一番基本的な記法</h3>

<p>(例)</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">!!!</div><div style="padding:0 6px; white-space:pre; line-height:130%">%html{lang:&nbsp;"ja"}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%head</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;%meta{charset:&nbsp;"utf-8"}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%body</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;hello&nbsp;world!</div></div></td></tr></table></div>


<p><br><br></p>

<h4>&lt;コード解説></h4>

<p>1.!!!<br>
&lt;!DOCTYPE html>を表す<br>
2.%<br>
タグの前に%を付けると&lt;開始タグ>と&lt;終了タグ>を表す。%html => &lt;html>&lt;/html><br>
3.インデントを必ず入れる<br>
親子関係のタグは必ずインデントを入れて関係性を作る。<br>
4.属性を入れる場合<br>
Ruby風に{}とシンボルで書ける。<br>
また、HTML風に書くなら「%html(lang=&ldquo;ja&rdquo;)」<br><br>
こんなにもできます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">%div{id:&nbsp;"my-id"}&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">%div{class:&nbsp;"my-class"}&nbsp;Contents</div></div></td></tr></table></div>


<p>ちなみにidやclassは次のように書いても同じものが表示されます。divタグの場合のみ%divを省略することもできます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">#my-id&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">.my-class&nbsp;Contents</div></div></td></tr></table></div>


<p>これをHTMLで書くと、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">id</span>=<span style="color:#ffd500">"my-id"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"my-class"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p>こういうふうになります。<br><br></p>

<h3>HTMLに記述されないコメント</h3>

<p>次のように-#をつけて書いた文字列はHTMLには記述されません。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">-#&nbsp;test&nbsp;comment</span></div></div></td></tr></table></div>


<p><br></p>

<h3>HTMLに残すコメント</h3>

<p>HTMLに残すコメントはHAMLでは次のように書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/&nbsp;This&nbsp;is&nbsp;the&nbsp;peanutbutterjelly&nbsp;element</span></div></div></td></tr></table></div>


<p>すると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&lt;!--&nbsp;This&nbsp;is&nbsp;the&nbsp;peanutbutterjelly&nbsp;element&nbsp;--&gt;</span></div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyの変数を使う</h3>

<p>HAML内ではRubyの変数を簡単に呼び出せます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;text&nbsp;=&nbsp;"good"</div><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;text2&nbsp;=&nbsp;'HAML'</div><div style="padding:0 6px; white-space:pre; line-height:130%">%div{class:&nbsp;hoge}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;message&nbsp;is&nbsp;#{text}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text2</div></div></td></tr></table></div>


<p>これをHTMLに変換すると次のようになります。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"good"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;message&nbsp;is&nbsp;good</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;HAML</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyのif文やcase文を埋め込む</h3>

<p>Rubyのif文やcase文も埋め込むことが可能です。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">%p</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;case&nbsp;1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"1!"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;2</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"2?"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;3</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"3."</div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyのブロックを使う</h3>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;(42...47).each&nbsp;do&nbsp;|i|</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%p=&nbsp;i</div><div style="padding:0 6px; white-space:pre; line-height:130%">%p&nbsp;See,&nbsp;I&nbsp;can&nbsp;count!</div></div></td></tr></table></div>


<p><br></p>

<h1>Slim</h1>

<p>SlimのgithubページにはSlimを
&ldquo;Slim は 不可解にならないように view の構文を本質的な部品まで減らすことを目指したテンプレート言語です。標準的な HTML テンプレートからどれだけのものが削除できるか確かめるところから始まりました。(&lt;, >, 閉じタグなど) 多くの人が Slim に興味を持ったことで, 機能性は発展し, 柔軟な構文をもたらしました&rdquo;
と紹介しています。</p>

<h2>Gem Slimのインストール</h2>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;install&nbsp;slim</div></div></td></tr></table></div>


<h2>Slimの書き方</h2>

<p>まず、HTMLとSlimを比べてみると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">head</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">meta</span>&nbsp;<span style="color:#a8ff58">charset</span>=<span style="color:#ffd500">"utf-8"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">title</span><span style="color:#f0f0f0">&gt;</span>Jo's&nbsp;Training<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">title</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">head</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">body</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"sample"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">id</span>=<span style="color:#ffd500">"contents"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">h1</span><span style="color:#f0f0f0">&gt;</span>Sample&nbsp;File<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">h1</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">img</span>&nbsp;<span style="color:#a8ff58">alt</span>=<span style="color:#ffd500">"sampleImage"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">src</span>=<span style="color:#ffd500">"http://www.jotraining.com/images/sampleImage.jpg"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span>テキストテキストテキスト<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span>テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキストテキストテキスト<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">body</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">html</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p>上記のようなHTMLは</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;html</div><div style="padding:0 6px; white-space:pre; line-height:130%">html</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;head</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;meta&nbsp;charset="utf-8"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;title&nbsp;Sample&nbsp;File</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;body.sample</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;#contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h1&nbsp;Sample&nbsp;File</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;src="http://www.e2esound.com/images/yterajima.jpg"&nbsp;alt="yterajima"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキストテキストテキスト</div></div></td></tr></table></div>


<p>Slimではこういうふうに書けます。<br>
Slimはインデントを用いてHTMLの入れ子を表現します。このインデントの深さは自由に決めることができます。<br></p>

<h2>3つのポイント</h2>

<p>1.通常のHTMLから &lt;, >, /> を取り除く<br>
2.doctype<br>
3.テキストと | (パイプ)の扱い<br>
4.コメント<br></p>

<h3>通常のHTMLから&lt;, >, />を取り除く</h3>

<p>上記の例を見ると</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">img</span>&nbsp;<span style="color:#a8ff58">alt</span>=<span style="color:#ffd500">"sampleImage"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">src</span>=<span style="color:#ffd500">"http://www.jotraining.com/images/sampleImage.jpg"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">img&nbsp;src="http://www.jotraining.com/images/sampleImage.jpg"&nbsp;alt="sampleImage"</div></div></td></tr></table></div>


<h3>doctype</h3>

<p>上記のslimの1行目、doctype htmlはHTMLの&lt;!DOCTYPE html>を表しています。</p>

<h4>XML 宣言</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;xml</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">?xml</span>&nbsp;<span style="color:#a8ff58">version</span>=<span style="color:#ffd500">"1.0"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">encoding</span>=<span style="color:#ffd500">"utf-8"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">?</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;xml&nbsp;ISO-8859-1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">?xml</span>&nbsp;<span style="color:#a8ff58">version</span>=<span style="color:#ffd500">"1.0"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">encoding</span>=<span style="color:#ffd500">"iso-8859-1"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">?</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h4>XHTML ドキュメントタイプ</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;html</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;5</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;1.1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.1//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;strict</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Strict//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;frameset</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Frameset//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;mobile</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//WAPFORUM//DTD&nbsp;XHTML&nbsp;Mobile&nbsp;1.2//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;basic</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;Basic&nbsp;1.1//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;transitional</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h4>HTML 4 ドキュメントタイプ</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;strict</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/strict.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;frameset</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Frameset//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/frameset.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;transitional</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/loose.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h3>コメント</h3>

<p>Slimのコメントには変換後出力されるコメントとされないコメントの2種類があります。<br></p>

<h4>HTMLに記述されないコメント</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/&nbsp;このコメントは変換後表示されない</span></div></div></td></tr></table></div>


<h4>HTMLに残すコメント</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/!&nbsp;このコメントは変換後HTMLコメントになる</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&lt;!--&nbsp;このコメントは変換後HTMLコメントになる&nbsp;--&gt;</span></div></div></td></tr></table></div>


<p></small></p>

<h2>参照</h2>

<p><small>
<a href="http://morizyun.github.io/blog/beginner-rails-tutorial-haml/">http://morizyun.github.io/blog/beginner-rails-tutorial-haml/</a>
<a href="http://qiita.com/watak676/items/525ad3d8a1297e3244e3">http://qiita.com/watak676/items/525ad3d8a1297e3244e3</a>
<a href="http://qiita.com/yterajima/items/53fd0387279510ff082a">http://qiita.com/yterajima/items/53fd0387279510ff082a</a>
<a href="https://github.com/slim-template/slim/blob/master/README.jp.md">https://github.com/slim-template/slim/blob/master/README.jp.md</a></p>

<p></small></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/6">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/4">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Jo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
