
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JQ Blog</title>
  <meta name="author" content="Jo">

  
  <meta name="description" content="Gemとは 言語によってそれぞれ使用しやすい方式で作ったものを提供させています。それをライブラリ、またはフレームワークといいます。RailsがフレームワークだとしたらGemはライブラリです。つまり、必要な機能がある場合追加して使用したら良いです。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jq-jo.github.io/posts/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="JQ Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">JQ Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="jq-jo.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/21/about-gem/">Gemの作り方</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-21T15:36:47+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>3:36 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Gemとは</h2>

<p>言語によってそれぞれ使用しやすい方式で作ったものを提供させています。それをライブラリ、またはフレームワークといいます。RailsがフレームワークだとしたらGemはライブラリです。つまり、必要な機能がある場合追加して使用したら良いです。<br>
基本的にオープンソースとしてディストリビューションされていて、誰でも検索し、使用法を調べて使用したら良いです。</p>

<h3>例え</h3>

<h5>devise</h5>

<p>会員登録やログインシステムのためによく使われるGemのdeviseを例に取ってみます。<br>
まず、<b><a href="https://rubygems.org">https://rubygems.org</a><b>でdeviseを検索してみると、<br>
<img src="https://monosnap.com/file/roucgQ03rPFDUOeMncRDbc4VVGOdDK.png"><br>
上記のように色んなバージョンにできています。その中で自分がインストールしたいバージョンを選んでインストールしたら良いです。<br>
次はgithubで検索してみると、<br>
<img src="https://monosnap.com/file/fdvk59gCh6h2InQQG0Prc7828IcOqH.png"><br>
<img src="https://monosnap.com/file/loOJDPdGcmpoqEGt9DltZwmrBMCPYD.png"><br>
全てのGemはこのようにソースコードと使い方を公開しています。<br></p>

<h2>　作り方</h2>

<p>さて、本格的にGemの作り方を見てみましょう。<br>
Gemの作り方は以外と簡単です。<br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;gem&nbsp;「Gem名」</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p>こういうふうにすると下のように作成ができます。<br>
<img src="https://monosnap.com/file/JcBC289LEHlEjtc4liLqoqc9Rpn8MY.png"><br>
作成が終わったらディレクトリの中にlibフォルダーが確認できます。<br>
<img src="https://monosnap.com/file/nIIEjjx6RXpYs3F7zSwRoUcRFTfM58.png"><br>
この場合、hello_system_team.rbが本体になり、このGemをrequireすると、最初にこのファイルが呼ばれ、次にこのファイルでrequireしているものが呼ばれるという形になります。<br>
version.rbは単純にGemのバージョン管理に必要なファイルです。<br>
まず、hello_system_team.rbをみると、</p>

<p><div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">require</span>&nbsp;<span style="color:#ffd500">&ldquo;hello_system_team/version&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">module</span>&nbsp;HelloSystemTeam</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;Your&nbsp;code&nbsp;goes&nbsp;here&hellip;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"></td></tr></table></div>
こうなっていますが<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">def</span>&nbsp;self.exec</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#4be6fa">puts</span>&nbsp;<span style="color:#ffd500">&ldquo;Hello&nbsp;System-Team!&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>
moduleの中にこれを入れます。上記のメソッドは例えなので実際に実行したいメソッドを入れたら良いです。
後はディレクトリの中にあるhello_system_team.gemspecの設定を変更します。<br>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;coding:&nbsp;utf-8</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">lib&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;File.expand_path(<span style="color:#ffd500">&lsquo;../lib&rsquo;</span>,&nbsp;<strong>FILE</strong>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">$LOAD_PATH.unshift(lib)&nbsp;<span style="color:#ff3399">unless</span>&nbsp;$LOAD_PATH.include?(lib)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">require</span>&nbsp;<span style="color:#ffd500">&lsquo;hello_system_team/version&rsquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">Gem::Specification.<span style="color:#ff3399">new</span>&nbsp;<span style="color:#ff3399">do</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>spec<span style="color:#0086b3"></span><span style="color:#ff3399">|</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;hello_system_team&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;HelloSystemTeam::VERSION</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.authors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;jo&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;<a href="&#109;&#97;&#105;&#x6c;&#116;&#111;&#58;&#102;&#x61;&#x6e;&#x74;&#97;&#x73;&#x74;&#x69;&#99;&#106;&#121;&#x63;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#x66;&#97;&#110;&#x74;&#97;&#x73;&#116;&#105;&#x63;&#106;&#121;&#99;&#x40;&#103;&#109;&#97;&#105;&#108;&#x2e;&#99;&#111;&#109;</a>&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.summary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;%q{TODO:&nbsp;Write&nbsp;a&nbsp;short&nbsp;summary,&nbsp;because&nbsp;Rubygems&nbsp;requires&nbsp;one.}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.description&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;%q{TODO:&nbsp;Write&nbsp;a&nbsp;longer&nbsp;description&nbsp;<span style="color:#ff3399">or</span>&nbsp;delete&nbsp;this&nbsp;line.}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.homepage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;TODO:&nbsp;Put&nbsp;your&nbsp;gem&rsquo;s&nbsp;website&nbsp;or&nbsp;public&nbsp;repo&nbsp;URL&nbsp;here.&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.license&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;MIT&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;Prevent&nbsp;pushing&nbsp;this&nbsp;gem&nbsp;to&nbsp;RubyGems.org.&nbsp;To&nbsp;allow&nbsp;pushes&nbsp;either&nbsp;set&nbsp;the&nbsp;&lsquo;allowed_push_host&rsquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;to&nbsp;allow&nbsp;pushing&nbsp;to&nbsp;a&nbsp;single&nbsp;host&nbsp;or&nbsp;delete&nbsp;this&nbsp;section&nbsp;to&nbsp;allow&nbsp;pushing&nbsp;to&nbsp;any&nbsp;host.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;spec.respond_to?(:metadata)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;spec.metadata[<span style="color:#ffd500">&lsquo;allowed_push_host&rsquo;</span>]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;TODO:&nbsp;Set&nbsp;to&nbsp;&lsquo;<a href="http://mygemserver.com">http://mygemserver.com</a>&rsquo;&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">else</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">raise</span>&nbsp;<span style="color:#ffd500">&ldquo;RubyGems&nbsp;2.0&nbsp;or&nbsp;newer&nbsp;is&nbsp;required&nbsp;to&nbsp;protect&nbsp;against&nbsp;public&nbsp;gem&nbsp;pushes.&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<code>git&amp;nbsp;ls&lt;span style="color:#0086b3"&gt;&lt;/span&gt;&lt;span style="color:#ff3399"&gt;-&lt;/span&gt;files&amp;nbsp;&lt;span style="color:#0086b3"&gt;&lt;/span&gt;&lt;span style="color:#ff3399"&gt;-&lt;/span&gt;z</code>.split(<span style="color:#ffd500">&ldquo;\x0&rdquo;</span>).reject&nbsp;{&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>f<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>&nbsp;f.match(%r{^(test<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>spec<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>features)<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>})&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.bindir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">&ldquo;exe&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.executables&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;spec.files.grep(%r{^exe<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>})&nbsp;{&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>f<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>&nbsp;File.basename(f)&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.require_paths&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[<span style="color:#ffd500">&ldquo;lib&rdquo;</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;bundler&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;1.12&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;rake&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;10.0&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;spec.add_development_dependency&nbsp;<span style="color:#ffd500">&ldquo;rspec&rdquo;</span>,&nbsp;<span style="color:#ffd500">&ldquo;~&gt;&nbsp;3.0&rdquo;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"></td></tr></table></div>
正しく変更できない場合はエラーが出てきます。僕の場合はsummary, description, homepage, metadataでエラーが出てきました。（泣）<br><br>
そこまでできると、実行してみましょう。irbで実行してみたら下のようにうまくできます。<br>
でも、複雑なGemになってくるとirbだけでは難しくなってきますのでその時ちゃんとテストを行うのが良いです。<br>
<img src="https://monosnap.com/file/h5kTn3dIfmOWVSLwOH9VN8MqkNC40D.png"><br>
<img src="https://monosnap.com/file/XKh2f66LFf1eqPwR0d2nvNWkjfhxhF.png"><br>
無事にテストまでできればBuildとPushをします。<br>
<img src="https://monosnap.com/file/8gExpFLiFE3bp3aSETRDbMr2ve8HWl.png"><br>
<img src="https://monosnap.com/file/DQvQmAEby99zCjsm78cthxoP9eYtuY.png"><br>
そして、Gemを検索してみると出てきますね！<br>
<img src="https://monosnap.com/file/XSuEglI37Wj3JrGewJpA5snRgZP1xJ.png"><br>
他のプロジェクトでこのGemをインストールしたらGemに入っているメソッドを使うことができます。
<img src="https://monosnap.com/file/0Xs0Nkdr239XWyr1jrqy3iYNV6XAsr.png"><br></p>

<h2>参照</h2>

<p><small>
<a href="http://qiita.com/takashi/items/672781ed1b6255303381">http://qiita.com/takashi/items/672781ed1b6255303381</a>
</small>
<br><br><br></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/07/ios-webview/">iOS Webviewのまとめ</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-07T15:21:16+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:21 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Project 作成</h3>

<p>まずプロジェクトを作成します。<br>
<img src="https://www.evernote.com/l/Aj-3dSPSUctGQKIqs055VX_XEZPnNlR0MMYB/image.png" /><br>
<img src="https://www.evernote.com/l/Aj-pEsLUGBtG15Vjvd1lC9sQ7UFtz0Rsm7wB/image.png" /><br></p>

<h3>Webviewを入れ込む</h3>

<p><img src="https://www.evernote.com/l/Aj8g5xqFJHNBhofYe02KBDokRoUWEeh8qWwB/image.png" /><br>
プロジェクトが作成できると上の写真のようにMain.storyboardが作られてます。右側の下のところにあるobject liblaryでWebviewを探してview controllerに入れ込みます。<br>
<img src="https://www.evernote.com/l/Aj-NLrtHcw9J1quIgvhSvv-6XmlxEY26UD8B/image.png" /><br>
右側の上の方にあるassistant editorをクリックすると下のように画面が分けられてWebviewをオブジェクト化しやすくなります。<br>
<img src="https://www.evernote.com/l/Aj-wZ8hGHSNM9L6hJYnlLQr8Y6lEKvypu9AB/image.png" /><br>
<img src="https://www.evernote.com/l/Aj86fjzYepJHYKLdbDXNojr9Rd9GwnJS1_4B/image.png" /><br>
名前を作成したら、<br>
<img src="https://www.evernote.com/l/Aj8EwHqIebpEmo8g3LWqX2R9P6Z1U6hMp5cB/image.png" /><br>
その名前を持つオブジェクトが作れます。<br></p>

<h3>Webviewの設定</h3>

<p><img src="https://www.evernote.com/l/Aj-4IidQy9tM2akZ6EQXUrGZoT742mKP8OgB/image.png" /><br>
上のようにWebviewを設定してURLをロードします。<br>
delegateを指定しないとエラーになるので必ず入力します。そしてloadRequestメソッドを使ってURLを読み込みます。<br>
<img src="https://www.evernote.com/l/Aj9oN5HjMUdAWb-eyGCUtNWD1EjNrdaL4JwB/image.png" /><br>
Webviewのlayoutを指定して、<br>
<img src="https://www.evernote.com/l/Aj946gcePApPK6zNRxbl2EDeIR7E_Su1ErwB/image.png" /><br>
デバイスを選択し、runすると、<br>
<img src="https://www.evernote.com/l/Aj_0gcm7p5BLapIRAH4RPkySEbI2IS741VYB/image.png" style="width: 50%;" /><br>
こういうふうに起動します。<br>
単純にview controllerだけではなくてTabbar ControllerやNavigation Controllerを使うことも可能です。<br>
今回はTabbar Controllerを使ってみます。<br></p>

<h3>Tabbar Controllerの使い方</h3>

<p><img src="https://www.evernote.com/l/Aj80Vt-JCuVBh5asIYsDZM62ga5TQVsr3koB/image.png" /><br>
まず、右下のObject LibraryでTabbar Controllerを探して中に入れ込みます。<br>
<img src="https://www.evernote.com/l/Aj8jVthnKFtFMq4-8mimtjiLlRBlI0RBdKMB/image.png" /><br>
View Controllerの隣にある'->&lsquo;をEntryPointと言います。簡単にいうとアプリのスタートになるところを指定するPointです。<br>
<img src="https://www.evernote.com/l/Aj_uujrGbjVN3qZXCbEdPAugVo_mQyWOPZIB/image.png" /><br>
View ControllerにあるEntryPointをTabbar Controllerに移動します。<br>
<img src="https://www.evernote.com/l/Aj_0nHriQNZAjorF-C0aPmsAm8XXJatnaTEB/image.png" /><br>
次は、Tabbar ControllerのSegueを該当View ControllerにつないでRelationshipを作ります。<br>
<img src="https://monosnap.com/file/ZSHIOPqrBkqscUoRN89VfXV9sAT8d5.png"><br>
そしたら上のようにView ControllerはTabbar Controllerの一つのItemとなります。<br>
<img src="https://monosnap.com/file/CzoLNql2j34gJey0Mw70el1YcRFTXU.png"><br>
Tabbar Itemを編集して名前やImageも変えることができます。右のところで編集すると、<br>
<img src="https://monosnap.com/file/Wl81tRb4VgMMVZy0GhGKuYQcJuyivE.png"><br>
簡単に変わります。<br>
デバイスで確認すると、<br>
<img src="https://monosnap.com/file/e3Ke7c7dk4nuBupiaI4PiixgTNucFg.png" style="width: 50%;"><br>
こう変わりました。<br>
<img src="https://monosnap.com/file/UWCF2Yn6KFh7IkyFxE387x6alyjU7Z.png"><br>
次は、Tabbarの色を変えてみます。Tabbarを選択し、右のところを編集すると、<br>
<img src="https://monosnap.com/file/FJfKiSGiz2UErNL9FRjSpa438b1Y8K.png"><br>
色が変わります。<br>
もう一度デバイスで確認すると、<br>
<img src="https://monosnap.com/file/yiS5jc2v16Yds9vgTXF6cOrs66vx1d.png" style="width: 50%;"><br>
こういうふうに変わるのを見ることができます。<br><br><br></p>

<p>個人的な意見では、Tabbar Controllerはそれぞれの機能を持てる画面を使用するNativeアプリにもっと合う気がします。Webviewを使うHybridアプリにはNativeアプリに使うことよりは効率性が高くないんじゃないかなと思います。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/31/Hybrid-Native-Responsive/">Hybrid, Native, Responsive</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-31T16:02:03+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>4:02 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Mobile Applicationの種類</h1>

<p><img src="/images/threeApps.jpg"><br>
1. Native Application<br>
2. Hybrid Application<br>
3. Responsive Web Application<br></p>

<h2>Native Application</h2>

<p>Native Appの開発でアプリはios, androidなどの特定のMobile Platformに合わせて作成することになり、一般的にはPlatform会社の開発道具を使用して作られます。他のPlatformにはコードの再使用はできません。<br><br></p>

<h4>メリット</h4>

<p>• 性能が高い（特にゲームの場合）<br>
<small>- グラフィックユーザーインターフェース、速度など</small><br>
• デバイスの全ての機能を使える（センサー、カメラ、連絡先など）<br>
• Appleのアップストア、GooglePlayなどの公開アップストアを通して配布<br></p>

<h4>デメリット</h4>

<p>• 開発者不足<br>
• Platform別にそれぞれアプリを作るため費用を使う<br>
• Platform別にコードベースを管理するため費用と時間を使う<br>
• 長い開発期間<br>
• 開発のかかる時間で各Platformのバージョンがそれぞれになる可能性がある<br>
• 各アップストアの承認手順を待たなきゃいけないのでアプリの配布が遅くなる可能性がある<br></p>

<h4>開発道具</h4>

<p>• Apple: XCode<br>
• Android: Android Studio, eclipse<br></p>

<h2>Responsive</h2>

<p>HTML 5, CSS, JSなどを使用して作るWeb Application。デバイスのブラウザーを通して接近できます。デバイスの機能を使用することが難しいです。<br></p>

<h4>メリット</h4>

<p>• 既存Web開発者を活用して作れる<br>
• 費用が一番安い<br>
• 一つのコードベースだけ管理する<br>
• 早く編集、アップデートや配布が可能<br></p>

<h4>デメリット</h4>

<p>• インターフェースが標準Native Appと違う可能性がある<br>
• マルチメディアの性能がよくない<br>
• デバイスの機能を使うことが難しい<br></p>

<h4>開発道具</h4>

<p>HTML 5, JS, CSSを使ってWebを作ることに使用される全ての開発道具はResponsive Web Applicationを作ることができます。<br>
• AngularJS - Googleが管理しているopen source web application framework<br>
• Ember.js - open source javascript web application framework<br>
• React - facebookが管理しているopen source javascript library<br>
• JQuery - javascript library<br>
• Bootstrap - Responsiveを優先するCSS framework<br></p>

<h2>Hybrid Application</h2>

<p>Hybrid ApplicationはResponsive AppをMobile Platformで実行するAppになります。ウェブ標準を使用するが最終アプリはデバイスでnative appで実行されます。Native AppとResponsive Appのメリットだけ合わせるように誕生した。<br></p>

<h4>メリット</h4>

<p>• ウェブ標準を使用して作る（APIやデバイスの機能に接近するためコーディングが必要<br>
• 既存ウェブ開発者を活用して開発可能<br>
• 早く編集、アップデートや配布が可能<br>
• 各PlatformでNative Appで実行する<br></p>

<h4>デメリット</h4>

<p>• インターフェースが標準Native Appと違う可能性がある<br>
• Native Appよりは性能がよくない<br>
• 一般的にデバイスの全ての機能が使えるが新たな機能は少し時間がかかる<br>
• Platformによってそれぞれ違うコードベースにしなきゃいけない<br></p>

<h4>開発道具</h4>

<p>• Apache Cordova - HTML 5, CSS, javascriptを使用しているResponsive Appを基盤にしてNative Appをbuildするopen source platform<br>
• Adobe PhoneGap - Adobeが作ったApache Cordovaの変形<br>
• Alpha Anywhere - Responsive Appを作ってそれをNative Appに配布するようにしてくれる開発環境<br>
• Ionic Framework - AngularJSやCordovaと連携してResponsive Appを基盤にしてNative Appをbuildするユーザーインターフェース中心のframework<br></p>

<h1>b#まとめ</h1>

<p><img src="/images/chart_apps.png"></p>

<p></small></p>

<h2>参照</h2>

<p><small>
<a href="http://www.itworld.co.kr/news/95791">http://www.itworld.co.kr/news/95791</a></p>

<p></small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/24/HAML%20&%20Slim/">HAML & Slim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-24T10:25:08+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:25 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>HAML (HTML Abstraction Markup Language)</h1>

<p>インラインコードを使わなくてウェブHTML文書を記述することに使用するマークアップ言語です。PHPやASP、ほとんどのRubyOnRails Applicationで使用されています。コードが簡単になる長所がありますが、デザイナーやパブリッシャーとの協業が必要なプロジェクトには使用が難しくなる短所があります。</p>

<h2>Gem HAMLのインストール</h2>

<p>HAMLのGemをプロジェクトに追加します。Gemfileを開いて、 次のコードを「追加」します。<br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;<span style="color:#ffd500">'haml-rails'</span></div></div></td></tr></table></div>


<p>そしてインストールします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;install</div></div></td></tr></table></div>


<p>これからHAMLを使えます！！</p>

<h2>書き方</h2>

<h3>一番基本的な記法</h3>

<p>(例)</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">!!!</div><div style="padding:0 6px; white-space:pre; line-height:130%">%html{lang:&nbsp;"ja"}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%head</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;%meta{charset:&nbsp;"utf-8"}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%body</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;hello&nbsp;world!</div></div></td></tr></table></div>


<p><br><br></p>

<h4>&lt;コード解説></h4>

<p>1.!!!<br>
&lt;!DOCTYPE html>を表す<br>
2.%<br>
タグの前に%を付けると&lt;開始タグ>と&lt;終了タグ>を表す。%html => &lt;html>&lt;/html><br>
3.インデントを必ず入れる<br>
親子関係のタグは必ずインデントを入れて関係性を作る。<br>
4.属性を入れる場合<br>
Ruby風に{}とシンボルで書ける。<br>
また、HTML風に書くなら「%html(lang=&ldquo;ja&rdquo;)」<br><br>
こんなにもできます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">%div{id:&nbsp;"my-id"}&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">%div{class:&nbsp;"my-class"}&nbsp;Contents</div></div></td></tr></table></div>


<p>ちなみにidやclassは次のように書いても同じものが表示されます。divタグの場合のみ%divを省略することもできます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">#my-id&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">.my-class&nbsp;Contents</div></div></td></tr></table></div>


<p>これをHTMLで書くと、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">id</span>=<span style="color:#ffd500">"my-id"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"my-class"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Contents</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p>こういうふうになります。<br><br></p>

<h3>HTMLに記述されないコメント</h3>

<p>次のように-#をつけて書いた文字列はHTMLには記述されません。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">-#&nbsp;test&nbsp;comment</span></div></div></td></tr></table></div>


<p><br></p>

<h3>HTMLに残すコメント</h3>

<p>HTMLに残すコメントはHAMLでは次のように書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/&nbsp;This&nbsp;is&nbsp;the&nbsp;peanutbutterjelly&nbsp;element</span></div></div></td></tr></table></div>


<p>すると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&lt;!--&nbsp;This&nbsp;is&nbsp;the&nbsp;peanutbutterjelly&nbsp;element&nbsp;--&gt;</span></div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyの変数を使う</h3>

<p>HAML内ではRubyの変数を簡単に呼び出せます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;text&nbsp;=&nbsp;"good"</div><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;text2&nbsp;=&nbsp;'HAML'</div><div style="padding:0 6px; white-space:pre; line-height:130%">%div{class:&nbsp;hoge}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;message&nbsp;is&nbsp;#{text}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text2</div></div></td></tr></table></div>


<p>これをHTMLに変換すると次のようになります。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"good"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;message&nbsp;is&nbsp;good</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;HAML</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyのif文やcase文を埋め込む</h3>

<p>Rubyのif文やcase文も埋め込むことが可能です。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">%p</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;case&nbsp;1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"1!"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;2</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"2?"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;-&nbsp;when&nbsp;3</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;"3."</div></div></td></tr></table></div>


<p><br></p>

<h3>Rubyのブロックを使う</h3>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">-&nbsp;(42...47).each&nbsp;do&nbsp;|i|</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;%p=&nbsp;i</div><div style="padding:0 6px; white-space:pre; line-height:130%">%p&nbsp;See,&nbsp;I&nbsp;can&nbsp;count!</div></div></td></tr></table></div>


<p><br></p>

<h1>Slim</h1>

<p>SlimのgithubページにはSlimを
&ldquo;Slim は 不可解にならないように view の構文を本質的な部品まで減らすことを目指したテンプレート言語です。標準的な HTML テンプレートからどれだけのものが削除できるか確かめるところから始まりました。(&lt;, >, 閉じタグなど) 多くの人が Slim に興味を持ったことで, 機能性は発展し, 柔軟な構文をもたらしました&rdquo;
と紹介しています。</p>

<h2>Gem Slimのインストール</h2>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;install&nbsp;slim</div></div></td></tr></table></div>


<h2>Slimの書き方</h2>

<p>まず、HTMLとSlimを比べてみると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">head</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">meta</span>&nbsp;<span style="color:#a8ff58">charset</span>=<span style="color:#ffd500">"utf-8"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">title</span><span style="color:#f0f0f0">&gt;</span>Jo's&nbsp;Training<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">title</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">head</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">body</span>&nbsp;<span style="color:#a8ff58">class</span>=<span style="color:#ffd500">"sample"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">div</span>&nbsp;<span style="color:#a8ff58">id</span>=<span style="color:#ffd500">"contents"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">h1</span><span style="color:#f0f0f0">&gt;</span>Sample&nbsp;File<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">h1</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">img</span>&nbsp;<span style="color:#a8ff58">alt</span>=<span style="color:#ffd500">"sampleImage"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">src</span>=<span style="color:#ffd500">"http://www.jotraining.com/images/sampleImage.jpg"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span>テキストテキストテキスト<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span>テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキストテキストテキスト<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">p</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">div</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">body</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#f0f0f0">/</span><span style="color:#ff3399">html</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<p>上記のようなHTMLは</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;html</div><div style="padding:0 6px; white-space:pre; line-height:130%">html</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;head</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;meta&nbsp;charset="utf-8"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;title&nbsp;Sample&nbsp;File</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;body.sample</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;#contents</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h1&nbsp;Sample&nbsp;File</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;src="http://www.e2esound.com/images/yterajima.jpg"&nbsp;alt="yterajima"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;テキストテキストテキスト</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキストテキストテキスト</div></div></td></tr></table></div>


<p>Slimではこういうふうに書けます。<br>
Slimはインデントを用いてHTMLの入れ子を表現します。このインデントの深さは自由に決めることができます。<br></p>

<h2>3つのポイント</h2>

<p>1.通常のHTMLから &lt;, >, /> を取り除く<br>
2.doctype<br>
3.テキストと | (パイプ)の扱い<br>
4.コメント<br></p>

<h3>通常のHTMLから&lt;, >, />を取り除く</h3>

<p>上記の例を見ると</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">img</span>&nbsp;<span style="color:#a8ff58">alt</span>=<span style="color:#ffd500">"sampleImage"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">src</span>=<span style="color:#ffd500">"http://www.jotraining.com/images/sampleImage.jpg"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">/</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">img&nbsp;src="http://www.jotraining.com/images/sampleImage.jpg"&nbsp;alt="sampleImage"</div></div></td></tr></table></div>


<h3>doctype</h3>

<p>上記のslimの1行目、doctype htmlはHTMLの&lt;!DOCTYPE html>を表しています。</p>

<h4>XML 宣言</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;xml</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">?xml</span>&nbsp;<span style="color:#a8ff58">version</span>=<span style="color:#ffd500">"1.0"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">encoding</span>=<span style="color:#ffd500">"utf-8"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">?</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;xml&nbsp;ISO-8859-1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">?xml</span>&nbsp;<span style="color:#a8ff58">version</span>=<span style="color:#ffd500">"1.0"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">encoding</span>=<span style="color:#ffd500">"iso-8859-1"</span><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58">?</span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h4>XHTML ドキュメントタイプ</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;html</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;5</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;1.1</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.1//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;strict</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Strict//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;frameset</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Frameset//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;mobile</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//WAPFORUM//DTD&nbsp;XHTML&nbsp;Mobile&nbsp;1.2//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;basic</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;Basic&nbsp;1.1//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;transitional</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h4>HTML 4 ドキュメントタイプ</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;strict</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/strict.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;frameset</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Frameset//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/frameset.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">doctype&nbsp;transitional</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#f0f0f0">&lt;</span><span style="color:#ff3399">!DOCTYPE</span>&nbsp;<span style="color:#a8ff58">html</span>&nbsp;<span style="color:#a8ff58">PUBLIC</span>&nbsp;<span style="color:#ffd500">"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN"</span><span style="color:#a8ff58"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#a8ff58"></span>&nbsp;<span style="color:#ffd500">"http://www.w3.org/TR/html4/loose.dtd"</span><span style="color:#a8ff58"></span><span style="color:#f0f0f0">&gt;</span></div></div></td></tr></table></div>


<h3>コメント</h3>

<p>Slimのコメントには変換後出力されるコメントとされないコメントの2種類があります。<br></p>

<h4>HTMLに記述されないコメント</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/&nbsp;このコメントは変換後表示されない</span></div></div></td></tr></table></div>


<h4>HTMLに残すコメント</h4>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/!&nbsp;このコメントは変換後HTMLコメントになる</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&lt;!--&nbsp;このコメントは変換後HTMLコメントになる&nbsp;--&gt;</span></div></div></td></tr></table></div>


<p></small></p>

<h2>参照</h2>

<p><small>
<a href="http://morizyun.github.io/blog/beginner-rails-tutorial-haml/">http://morizyun.github.io/blog/beginner-rails-tutorial-haml/</a>
<a href="http://qiita.com/watak676/items/525ad3d8a1297e3244e3">http://qiita.com/watak676/items/525ad3d8a1297e3244e3</a>
<a href="http://qiita.com/yterajima/items/53fd0387279510ff082a">http://qiita.com/yterajima/items/53fd0387279510ff082a</a>
<a href="https://github.com/slim-template/slim/blob/master/README.jp.md">https://github.com/slim-template/slim/blob/master/README.jp.md</a></p>

<p></small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/10/asset-pipeline/">Asset-pipeline</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-10T16:42:54+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:42 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Assetとは</h1>

<p>RailsにはJavaScriptやCSS、Imageなどの要素をアセットと呼びます。アセットはそれぞれに &lsquo;app/assets/javascripts/'、 'app/assets/stylesheets/'、 'app/assets/images&rsquo; フォルダーで管理します。
Railsは基本的にJavaScriptとCSSの拡張言語のCoffeeScriptとSCSSを提供します。</p>

<h1>Asset Pipelineとは</h1>

<p>JavaScriptやCSS、Imageなどのアセットを最小化(minify)または圧縮して連結するフレイムワーク</p>

<h1>Asset Pipelineの役割</h1>

<h5>1.アセットファイルのパスの管理</h5>

<h5>2.アセットのコンパイル</h5>

<h5>3.アセットの依存関係の整理</h5>

<h2>アセットファイルのパスの管理</h2>

<p>Assetsの中のパスの管理をします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/javascript/user.js</div><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/stylesheet/user.css</div></div></td></tr></table></div>


<p>というファイルを</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/user.js</div><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/user.css</div></div></td></tr></table></div>


<p>のように1つのディレクトリで管理されているようにアクセスさせてくれます。</p>

<h2>アセットのコンパイル</h2>

<p>Javascript、CSSのかわりに、CoffeeScript、SCSSを使うことも多いと思います。browserはCoffeeScriptとSCSSを読めないのでCoffeeScriptとSCSSをJavaScriptとCSSにコンパイルしなきゃいけないです。このように、ファイルを適当な形式に変換してくれる機能をAsset Pipelineと言います。<br>
必要となるgemは以下です。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'sprockets'</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'coffee_script'</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'scss'</span></div></div></td></tr></table></div>


<p><br></p>

<h3>sprockets</h3>

<p>Asset Pipelineの基盤の機能を提供してくれます。</p>

<h3>coffee_script &amp;&amp; scss</h3>

<p>それぞれCoffeeScript、SCSSを使うためです。</p>

<h2>アセットの依存関係の整理</h2>

<p>Asset間の依存関係を整理します。このようにファイルの読み込みの順番を管理します。他のファイルに影響を与えないためにコメントアウトの形式で書きます。<br>
<small>app/assets/javascript/application.js</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require&nbsp;jquery&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require&nbsp;jquery_ujs&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require_tree.</span></div></div></td></tr></table></div>


<p>Railsのアプリケーションでは複数のCSS、Javascriptを1つのファイルにまとめて提供することが主流となっています。それは複数ファイルが存在すればリクエストの数が増えてページの読み込みが遅くなるからです。アプリケーションの内の依存関係をまとめて提供するための仲介になるファイルを「manifest file」と呼び、デフォルトでは application.js、application.css になります。</p>

<h1>Asset Pipelineをコントロールする</h1>

<h2>develpment/productionの設定</h2>

<p>設定は/config/environments/ファイルに書きます。</p>

<h3>config.assets.js_compressor</h3>

<p>Javascriptの圧縮ライブラリの設定。productionではuglifierというgemを利用しているが nilの設定にして無効にすることも出来る。
default設定
development: nil
production: :uglifier</p>

<h3>config.assets.css_compressor</h3>

<p>CSSの圧縮ライブラリの設定。
default設定
development: nil
production: :uglifier</p>

<h3>config.assets.compile</h3>

<p>動的にcompileするかの設定。trueだとprecompileしていないファイルを動的にコンパイルするのでproductionではfalseが良さそうです。
default設定
development: true
production: false</p>

<h3>config.assets.digest</h3>

<p>pipelineを通した後のファイルにつく数字をつけるかどうかです。
default設定
development: false
production: true</p>

<h3>config.assets.debug</h3>

<p>debugするかの設定。
default設定
development: true
production: false</p>

<h2>precompileの設定</h2>

<p><small>config/initializers/asset.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Precompile&nbsp;additional&nbsp;assets.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;application.js,&nbsp;application.css,&nbsp;and&nbsp;all&nbsp;non-JS&nbsp;/&nbsp;CSS&nbsp;in&nbsp;app&nbsp;/&nbsp;assets&nbsp;folder&nbsp;are&nbsp;already&nbsp;added.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Rails.application.config.assets.precompile&nbsp;+&nbsp;=&nbsp;%&nbsp;w&nbsp;(search.js)&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">Rails&nbsp;.&nbsp;application&nbsp;.&nbsp;config&nbsp;.&nbsp;assets&nbsp;.&nbsp;precompile&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;%&nbsp;w&nbsp;(<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;.js&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;application.css)</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>


<h2>Asset Pipelineの流れ</h2>

<h3>production</h3>

<p>例えば、下記設定の場合。<br>
<small>/config/environments/production.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;js_compressor&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;:&nbsp;uglifier&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;css_compressor&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;:&nbsp;sass&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;compile&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">false</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;digest&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">true</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.debug&nbsp;=&nbsp;false</span></div></div></td></tr></table></div>


<p>1.assetにあるソースコードをコンパイル(coffee -> js、 scss -> css)<br>
2.コンパイルしたソースコードを合わせる (複数のファイルのコードをまとめる）<br>
3.ファイルを圧縮する（uglifier、sass)<br>
4.ファイルにダイジェストを付与する（ファイル名につくハッシュ)<br><br>
これでブラウザに送られます。<br><br></p>

<h3>development</h3>

<p>例えば、下記設定の場合。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.js_compressor&nbsp;=&nbsp;nil&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.css_compressor&nbsp;=&nbsp;nil&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.compile&nbsp;=&nbsp;true&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;digest&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">false</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;debug&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">true</span></div></div></td></tr></table></div>


<p>1.assetにあるソースコードをコンパイル(coffee -> js、 scss -> css)<br><br>
これだけでブラウザへ送られます。
</small></p>

<h2>参照</h2>

<p><small>
<a href="http://qiita.com/shizuma/items/1980bf885906c73238b6">http://qiita.com/shizuma/items/1980bf885906c73238b6</a>
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/03/rest/">REST</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-03T14:40:53+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>2:40 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h1>RESTとは</h1>

<h2>RESTとは</h2>

<p><small>2000年 Roy Fieldingが博士学位請求論文でREST(Representational State Transfer)をソフトウェアアーキテクチャとして提案した後、OPEN APIを開発する基本としてすぐに広く使われることになりました。RESTはSOAPがサービス指向アーキテクチャなのとは異なり、リソース指向アーキテクチャ(ROA: Resource Oriented Architecture)ということでウェブサイトのコンテンツやDBなどを全て一つのリソースとして把握し、各リソースの固有なURI(Uniform Resource Identifier)を付与して該当のリソースに対するCRUD(Create, Read, Update, Delete)作業をHTTPの基本命令語のPOST, GET, PUT, DELETEを通して処理するものです。</small></p>

<h2>ソフトウェアアーキテクチャとは</h2>

<p><small>ソフトウェアコンポーネント、それらの外部特性、またそれらの相互関係から構成されます。また、この用語はシステムのソフトウェアアーキテクチャの文書化を意味することもあります。ソフトウェアアーキテクチャの文書は開発依頼主とのコミュニケーションを容易にするもので、概要レベルの設計に関する早期の決定を促し、プロジェクト間でのコンポーネントとパターンの設計を再利用することを可能にします。</small></p>

<h2>ROAとは</h2>

<p><small>ウェブの全てのリソースをURIで表現し、構造的に連結してステートレスな方法で決まってあるメソッドだけを使用してリソースを運用するアーキテクチャ。</small></p>

<h2>REST API</h2>

<p><small>REST構造タイプに適するWeb APIをREST APIと言います。<br>
RESTの設計原則に従って策定された‘REST API’を提供するウェブサビスを’RESTful’だと言えます。</small></p>

<h2>REST APIの具現化例</h2>

<p><small>Google API<br>
Twitter API<br>
Facebook API<br>
。<br>
。<br>
。<br>
今の時点には山ほどあると思います。</small></p>

<h2>REST API情報提供方式</h2>

<p><small>XML<br>
JSON<br>
RSS</small></p>

<h2>RESTのメリット</h2>

<p><small></p>

<h3>1. わかりやすい<br></h3>

<p>•　URIに規律があるため、みたら直ぐに何をしているのかがわかります<br>
•　サービス内のリソースがURIで参照することが出来ます<br>
•　参照URIでは、常に同じレスポンスが期待出来ます<br></p>

<h3>2. 連携しやすい<br></h3>

<p>•　新たな機能などにも対応しやすいです<br>
•　RESTAPIを活用すればマッシュアップサービスがつくりやすいです<br>
•　OpenAPIを簡単に提供できます<br>
•　セッションを使わないのでそれぞれのリクエストに独立的です</small></p>

<h2>RESTの原則</h2>

<p><small>RESTを支持する人々は、ウェブのスケーラビリティと成長は、次に述べるような、いくつかのキーとなる設計原則の結果であると論じます。</small></p>

<h5>ステートレスなクライアント/サーバプロトコル</h5>

<p><small>HTTPの一つ一つが、そのリクエストを理解するために必要な全ての情報を含みます。そのため、クライアントもサーバも、メッセージ間におけるセッションの状態を記憶しておく必要がありません。ただし実際には、多くのHTTPベースのアプリケーションはクッキーやその他の仕掛けを使ってセッションの状態を管理しています (URLリライティングのような一部のセッション管理手法を使うシステムは、RESTful ではありません)。</small></p>

<h5>すべての情報 (リソース) に適用できる「よく定義された操作」のセット</h5>

<p><small>HTTP では操作 (メソッド) の小さなセットが定義されています。最も重要なのは &ldquo;GET"、"POST"、"PUT"、"DELETE&rdquo; であります。これらはデータ永続化に要求される CRUD と比較されることがあります。</small></p>

<h5>リソースを一意に識別する「汎用的な構文」</h5>

<p><small>RESTful なシステムでは、すべてのリソースは URI (Uniform Resource Identifier) で表される一意的な (ユニークな) アドレスを持ちます。</small></p>

<h5>アプリケーションの情報と状態遷移の両方を扱うことができる「ハイパーメディアの使用」</h5>

<p><small>RESTシステムでは、多くの場合、HTML文書またはXML文書を使います。こうした文書に情報およびその他のリソースへのリンクを含めます。こうすることにより、あるRESTリソースから他のRESTリソースを参照したい場合は単にリンクを辿るだけでよい。レジストリなどの他の基盤的な機能を使う必要はありません。</small></p>

<h3>URLの設計</h3>

<h5>ひと目でAPIと分かるようなURLにする</h5>

<p><small>APIを利用する人がURLを見た時にAPIと分かるようなURLにするのが良いです。<br>
例えは、ディレクトリに分ける場合と、サブドメインに切る場合があります。<br>
<a href="http://example.com/api">http://example.com/api</a><br>
<a href="http://api.example.com">http://api.example.com</a></small></p>

<h5>URLにAPIのバージョンを含める</h5>

<p><small>URLにAPIバージョンを含めるようにしたら管理もしやすいし、APIを使用する人がAPIのバージョンを選択しやすくなり、バージョンの切り分けも容易となるメリットが有ります。<br>
<a href="http://api.example.com/1/article">http://api.example.com/1/article</a><br>
<a href="http://api.example.com/v1/article/">http://api.example.com/v1/article/</a></small></p>

<h5>URLに動詞を含めず、複数形の名詞のみで構成する</h5>

<p><small>まず最初に好ましくないURLについて見てみると、<br>
<a href="http://api.example.com/v1/createArticle">http://api.example.com/v1/createArticle</a><br>
<a href="http://api.example.com/v1/article/create">http://api.example.com/v1/article/create</a><br>
<a href="http://api.example.com/v1/article/1/create">http://api.example.com/v1/article/1/create</a><br>
<a href="http://api.example.com/v1/article/createComment">http://api.example.com/v1/article/createComment</a><br>
<a href="http://api.example.com/v1/article/1/comment/1/create">http://api.example.com/v1/article/1/comment/1/create</a><br>
<br>
上記のリソースに対して一意ではないという問題と、一つのリソースに対してCRUDの操作が必要になった場合にその操作の分だけURLが増えてしまう問題があります。<br>
<br>
これを名詞のURLにすると、以下のようになります。<br>
<br>
<a href="http://api.example.com/v1/articles">http://api.example.com/v1/articles</a><br>
<small>article全てを指す</small><br>
<a href="http://api.example.com/v1/articles/1">http://api.example.com/v1/articles/1</a><br>
<small>articlesの中のID：1を指す</small><br>
<a href="http://api.example.com/v1/articles/1/comments">http://api.example.com/v1/articles/1/comments</a><br>
<small>articlesの  中のID:1についたcomment全てを指す</small><br>
<a href="http://api.example.com/v1/articles/1/comments/1">http://api.example.com/v1/articles/1/comments/1</a><br>
<small>articlesの中のID:1についたcommentsの中のID:1を指す</small></small></p>

<h5>リソースの関係性がひと目で分かるようにする</h5>

<p><small>URLを見ただけで、リソースがどこに属しているか分かるようにするのがベストです。<br>
例えば、記事に属するコメントを表す場合は以下のように書いてみます。<br>
<a href="http://api.example.com/v1/articles/1/comments">http://api.example.com/v1/articles/1/comments</a></small></p>

<h5>アプリケーションや言語に依存する拡張子は含めない</h5>

<p><small>URLの末尾に.htmlや.phpなど言語に関係した拡張子を付けないようにします。将来的にAPIの仕様変更で言語の変更などがあった場合に困ることになります。言語の拡張子がなければ、フレームワークや言語に縛られることがないので、様々な変更に対応ができます。</small></p>

<h5>長くしすぎない</h5>

<p><small><a href="http://api.example.com/articles/128/comments/10/tags/10/......">http://api.example.com/articles/128/comments/10/tags/10/......</a><br>
のように不要に長いURLをしないことが良いです。</small>
<br></p>

<h2>参照</h2>

<p><small>
<a href="http://wp.tech-style.info/archives/683#URL_8211_Cool_URI">http://wp.tech-style.info/archives/683#URL_8211_Cool_URI</a><br>
<a href="http://karur4n.hatenablog.com/entry/read-webtechbook">http://karur4n.hatenablog.com/entry/read-webtechbook</a><br>
<a href="https://ja.wikipedia.org/wiki/REST">https://ja.wikipedia.org/wiki/REST</a>
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/26/grape-gem/">Grape Gem</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-26T10:54:56+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:54 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Grapeとは</h1>

<p>Grape gemはruby用のREST-APIフレームワークです。簡単にRESTfulなAPIを開発するための単純なDSLを提供することによって、Railsとシナトラなどの既存のWebアプリケーションフレームワークを補完するために設計されています。</p>

<h1>Grape gemの実装</h1>

<h3>Grape gemのインストール</h3>

<p>まず、GemfileにGrapeを追加します。<br>
<small>Gemfile</small></p>

<div class="colorscripter-code" style="width: 100%; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;'grape'</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
bundle installをします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;install</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>model追加</h3>

<p>modelを追加してみます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">rails&nbsp;g&nbsp;model&nbsp;test_data&nbsp;name:string&nbsp;age:integer</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">rake&nbsp;db:migrate</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>application.rbの設定</h3>

<p>application.rbに以下のように書き、apiのパスを設定します。<br>
<small>application.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">config.paths.add&nbsp;File.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'app'</span>,&nbsp;<span style="color:#ffd500">'api'</span>),&nbsp;glob:&nbsp;File.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'**'</span>,&nbsp;<span style="color:#ffd500">'*.rb'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">config.autoload_paths&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;Dir[Rails.root.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'app'</span>,&nbsp;<span style="color:#ffd500">'api'</span>,&nbsp;<span style="color:#ffd500">'*'</span>)]</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>API作成</h3>

<p>appフォルダーにapiフォルダーを追加します。
ここに二つのファイルを作ります。一つは実際にapiとして動くファイルで、もう一つはそのファイルをmountするファイルです。
下のように書いてみます。<br>
<small>api/user/data.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">resource&nbsp;:user_data&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;desc&nbsp;<span style="color:#ffd500">"List&nbsp;all&nbsp;User"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestData.all</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
<small>api/api.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">class</span>&nbsp;API&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;Grape::API</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;prefix&nbsp;<span style="color:#ffd500">'api'</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;version&nbsp;<span style="color:#ffd500">'v1'</span>,&nbsp;using:&nbsp;:path</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mount&nbsp;User::Data</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>APIのルーティング追加</h3>

<p>route.rbにルーティング追加します。<br>
<small>route.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">mount&nbsp;API&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">'/'</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
それからrailsのserverを起動します。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">rails&nbsp;server</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールに下のように入力してみます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
そうすると、databaseに何もないので 「[ ]」 しか出てこないです。<br>
では、データーを入れてみましょう。<br>
まずはdata.rbにソースコードを追加します。もっと楽にするようにヘルパーを書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">helpers&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;user_params</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ActionController::Parameters.<span style="color:#ff3399">new</span>(params).permit(:name,&nbsp;:age)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@user&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;TestData.find(params[:id])</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
そして、下のようにcreateのコードを書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"create&nbsp;a&nbsp;new&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:name,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:age,&nbsp;type:&nbsp;Integer</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">post&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;TestData.create<span style="color:#0086b3"></span><span style="color:#ff3399">!</span>(user_params)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールにこう書くと、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json&nbsp;-d&nbsp;"name=Jo&age=30"</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":1,"name":"Jo","age":30,"created_at":"2016-07-26T07:15:11.212Z","updated_at":"2016-07-26T07:15:11.212Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p>簡単にデーターベースに入れ込みます。<br>
deleteとupdateも同じように作成します。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"delete&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">delete&nbsp;<span style="color:#ffd500">':id'</span>&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;@user.destroy<span style="color:#0086b3"></span><span style="color:#ff3399">!</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"update&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">put&nbsp;<span style="color:#ffd500">':id'</span>&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;@user.update(user_params)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールで実行してみると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;-X&nbsp;DELETE&nbsp;http://localhost:3000/api/v1/user_data/1.json</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":1,"name":"Jo","age":30,"created_at":"2016-07-26T05:11:16.608Z","updated_at":"2016-07-26T05:11:16.608Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
もう一度データーを作って</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json&nbsp;-d&nbsp;"name=Jo&age=30"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":2,"name":"Jo","age":30,"created_at":"2016-07-26T05:16:45.169Z","updated_at":"2016-07-26T05:16:45.169Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;-X&nbsp;PUT&nbsp;http://localhost:3000/api/v1/user_data/2.json&nbsp;-d&nbsp;"age=100"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">true</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
showの部分はちょっと迷いましたけど、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"show&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">route_param&nbsp;:id&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;get&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
こういうふうにGETをroute_paramに変えると簡単にできました。
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/26/first-post/">First Post</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-26T10:24:28+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:24 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>a</h1>

<h3>a-1</h3>

<h5>a-1-1</h5>

<p>abcd</p>

<h3>a-2</h3>

<h5>a-2-1</h5>

<p>abcd</p>

<h1>b</h1>

<h3>b-1</h3>

<h5>b-1-1</h5>

<p>abcd</p>

<h3>b-2</h3>

<h5>b-2-1</h5>

<p>abcd
</small></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Jo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
