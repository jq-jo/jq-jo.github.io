
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jo's Blog</title>
  <meta name="author" content="Jo">

  
  <meta name="description" content="Assetとは RailsにはJavaScriptやCSS、Imageなどの要素をアセットと呼びます。アセットはそれぞれに &lsquo;app/assets/javascripts/'、 'app/assets/stylesheets/'、 'app/assets/images&rsquo; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jq-jo.github.io/posts/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jo's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Jo's Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="jq-jo.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/10/asset-pipeline/">Asset-pipeline</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-10T16:42:54+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:42 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Assetとは</h1>

<p>RailsにはJavaScriptやCSS、Imageなどの要素をアセットと呼びます。アセットはそれぞれに &lsquo;app/assets/javascripts/'、 'app/assets/stylesheets/'、 'app/assets/images&rsquo; フォルダーで管理します。
Railsは基本的にJavaScriptとCSSの拡張言語のCoffeeScriptとSCSSを提供します。</p>

<h1>Asset Pipelineとは</h1>

<p>JavaScriptやCSS、Imageなどのアセットを最小化(minify)または圧縮して連結するフレイムワーク</p>

<h1>Asset Pipelineの役割</h1>

<h5>1.アセットファイルのパスの管理</h5>

<h5>2.アセットのコンパイル</h5>

<h5>3.アセットの依存関係の整理</h5>

<h2>アセットファイルのパスの管理</h2>

<p>Assetsの中のパスの管理をします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/javascript/user.js</div><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/stylesheet/user.css</div></div></td></tr></table></div>


<p>というファイルを</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/user.js</div><div style="padding:0 6px; white-space:pre; line-height:130%">/assets/user.css</div></div></td></tr></table></div>


<p>のように1つのディレクトリで管理されているようにアクセスさせてくれます。</p>

<h2>アセットのコンパイル</h2>

<p>Javascript、CSSのかわりに、CoffeeScript、SCSSを使うことも多いと思います。browserはCoffeeScriptとSCSSを読めないのでCoffeeScriptとSCSSをJavaScriptとCSSにコンパイルしなきゃいけないです。このように、ファイルを適当な形式に変換してくれる機能をAsset Pipelineと言います。<br>
必要となるgemは以下です。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'sprockets'</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'coffee_script'</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;&nbsp;<span style="color:#68ec68">'scss'</span></div></div></td></tr></table></div>


<p><br></p>

<h3>sprockets</h3>

<p>Asset Pipelineの基盤の機能を提供してくれます。</p>

<h3>coffee_script &amp;&amp; scss</h3>

<p>それぞれCoffeeScript、SCSSを使うためです。</p>

<h2>アセットの依存関係の整理</h2>

<p>Asset間の依存関係を整理します。このようにファイルの読み込みの順番を管理します。他のファイルに影響を与えないためにコメントアウトの形式で書きます。<br>
<small>app/assets/javascript/application.js</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require&nbsp;jquery&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require&nbsp;jquery_ujs&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;=&nbsp;require_tree.</span></div></div></td></tr></table></div>


<p>Railsのアプリケーションでは複数のCSS、Javascriptを1つのファイルにまとめて提供することが主流となっています。それは複数ファイルが存在すればリクエストの数が増えてページの読み込みが遅くなるからです。アプリケーションの内の依存関係をまとめて提供するための仲介になるファイルを「manifest file」と呼び、デフォルトでは application.js、application.css になります。</p>

<h1>Asset Pipelineをコントロールする</h1>

<h2>develpment/productionの設定</h2>

<p>設定は/config/environments/ファイルに書きます。</p>

<h3>config.assets.js_compressor</h3>

<p>Javascriptの圧縮ライブラリの設定。productionではuglifierというgemを利用しているが nilの設定にして無効にすることも出来る。
default設定
development: nil
production: :uglifier</p>

<h3>config.assets.css_compressor</h3>

<p>CSSの圧縮ライブラリの設定。
default設定
development: nil
production: :uglifier</p>

<h3>config.assets.compile</h3>

<p>動的にcompileするかの設定。trueだとprecompileしていないファイルを動的にコンパイルするのでproductionではfalseが良さそうです。
default設定
development: true
production: false</p>

<h3>config.assets.digest</h3>

<p>pipelineを通した後のファイルにつく数字をつけるかどうかです。
default設定
development: false
production: true</p>

<h3>config.assets.debug</h3>

<p>debugするかの設定。
default設定
development: true
production: false</p>

<h2>precompileの設定</h2>

<p><small>config/initializers/asset.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Precompile&nbsp;additional&nbsp;assets.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;application.js,&nbsp;application.css,&nbsp;and&nbsp;all&nbsp;non-JS&nbsp;/&nbsp;CSS&nbsp;in&nbsp;app&nbsp;/&nbsp;assets&nbsp;folder&nbsp;are&nbsp;already&nbsp;added.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Rails.application.config.assets.precompile&nbsp;+&nbsp;=&nbsp;%&nbsp;w&nbsp;(search.js)&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">Rails&nbsp;.&nbsp;application&nbsp;.&nbsp;config&nbsp;.&nbsp;assets&nbsp;.&nbsp;precompile&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;%&nbsp;w&nbsp;(<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;.js&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;application.css)</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>


<h2>Asset Pipelineの流れ</h2>

<h3>production</h3>

<p>例えば、下記設定の場合。<br>
<small>/config/environments/production.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;js_compressor&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;:&nbsp;uglifier&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;css_compressor&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;:&nbsp;sass&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;compile&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">false</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;digest&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">true</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.debug&nbsp;=&nbsp;false</span></div></div></td></tr></table></div>


<p>1.assetにあるソースコードをコンパイル(coffee -> js、 scss -> css)<br>
2.コンパイルしたソースコードを合わせる (複数のファイルのコードをまとめる）<br>
3.ファイルを圧縮する（uglifier、sass)<br>
4.ファイルにダイジェストを付与する（ファイル名につくハッシュ)<br><br>
これでブラウザに送られます。<br><br></p>

<h3>development</h3>

<p>例えば、下記設定の場合。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.js_compressor&nbsp;=&nbsp;nil&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.css_compressor&nbsp;=&nbsp;nil&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;config.assets.compile&nbsp;=&nbsp;true&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;digest&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">false</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">config&nbsp;.&nbsp;assets&nbsp;.&nbsp;debug&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;&nbsp;<span style="color:#c10aff">true</span></div></div></td></tr></table></div>


<p>1.assetにあるソースコードをコンパイル(coffee -> js、 scss -> css)<br><br>
これだけでブラウザへ送られます。
</small></p>

<h2>参照</h2>

<p><small>
<a href="http://qiita.com/shizuma/items/1980bf885906c73238b6">http://qiita.com/shizuma/items/1980bf885906c73238b6</a>
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/03/rest/">REST</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-03T14:40:53+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>2:40 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>RESTとは</h1>

<h2>RESTとは</h2>

<p><small>2000年 Roy Fieldingが博士学位請求論文でREST(Representational State Transfer)をソフトウェアアーキテクチャとして提案した後、OPEN APIを開発する基本としてすぐに広く使われることになりました。RESTはSOAPがサービス指向アーキテクチャなのとは異なり、リソース指向アーキテクチャ(ROA: Resource Oriented Architecture)ということでウェブサイトのコンテンツやDBなどを全て一つのリソースとして把握し、各リソースの固有なURI(Uniform Resource Identifier)を付与して該当のリソースに対するCRUD(Create, Read, Update, Delete)作業をHTTPの基本命令語のPOST, GET, PUT, DELETEを通して処理するものです。</small></p>

<h2>ソフトウェアアーキテクチャとは</h2>

<p><small>ソフトウェアコンポーネント、それらの外部特性、またそれらの相互関係から構成されます。また、この用語はシステムのソフトウェアアーキテクチャの文書化を意味することもあります。ソフトウェアアーキテクチャの文書は開発依頼主とのコミュニケーションを容易にするもので、概要レベルの設計に関する早期の決定を促し、プロジェクト間でのコンポーネントとパターンの設計を再利用することを可能にします。</small></p>

<h2>ROAとは</h2>

<p><small>ウェブの全てのリソースをURIで表現し、構造的に連結してステートレスな方法で決まってあるメソッドだけを使用してリソースを運用するアーキテクチャ。</small></p>

<h2>REST API</h2>

<p><small>REST構造タイプに適するWeb APIをREST APIと言います。<br>
RESTの設計原則に従って策定された‘REST API’を提供するウェブサビスを’RESTful’だと言えます。</small></p>

<h2>REST APIの具現化例</h2>

<p><small>Google API<br>
Twitter API<br>
Facebook API<br>
。<br>
。<br>
。<br>
今の時点には山ほどあると思います。</small></p>

<h2>REST API情報提供方式</h2>

<p><small>XML<br>
JSON<br>
RSS</small></p>

<h2>RESTのメリット</h2>

<p><small></p>

<h3>1. わかりやすい<br></h3>

<p>•　URIに規律があるため、みたら直ぐに何をしているのかがわかります<br>
•　サービス内のリソースがURIで参照することが出来ます<br>
•　参照URIでは、常に同じレスポンスが期待出来ます<br></p>

<h3>2. 連携しやすい<br></h3>

<p>•　新たな機能などにも対応しやすいです<br>
•　RESTAPIを活用すればマッシュアップサービスがつくりやすいです<br>
•　OpenAPIを簡単に提供できます<br>
•　セッションを使わないのでそれぞれのリクエストに独立的です</small></p>

<h2>RESTの原則</h2>

<p><small>RESTを支持する人々は、ウェブのスケーラビリティと成長は、次に述べるような、いくつかのキーとなる設計原則の結果であると論じます。</small></p>

<h5>ステートレスなクライアント/サーバプロトコル</h5>

<p><small>HTTPの一つ一つが、そのリクエストを理解するために必要な全ての情報を含みます。そのため、クライアントもサーバも、メッセージ間におけるセッションの状態を記憶しておく必要がありません。ただし実際には、多くのHTTPベースのアプリケーションはクッキーやその他の仕掛けを使ってセッションの状態を管理しています (URLリライティングのような一部のセッション管理手法を使うシステムは、RESTful ではありません)。</small></p>

<h5>すべての情報 (リソース) に適用できる「よく定義された操作」のセット</h5>

<p><small>HTTP では操作 (メソッド) の小さなセットが定義されています。最も重要なのは &ldquo;GET"、"POST"、"PUT"、"DELETE&rdquo; であります。これらはデータ永続化に要求される CRUD と比較されることがあります。</small></p>

<h5>リソースを一意に識別する「汎用的な構文」</h5>

<p><small>RESTful なシステムでは、すべてのリソースは URI (Uniform Resource Identifier) で表される一意的な (ユニークな) アドレスを持ちます。</small></p>

<h5>アプリケーションの情報と状態遷移の両方を扱うことができる「ハイパーメディアの使用」</h5>

<p><small>RESTシステムでは、多くの場合、HTML文書またはXML文書を使います。こうした文書に情報およびその他のリソースへのリンクを含めます。こうすることにより、あるRESTリソースから他のRESTリソースを参照したい場合は単にリンクを辿るだけでよい。レジストリなどの他の基盤的な機能を使う必要はありません。</small></p>

<h3>URLの設計</h3>

<h5>ひと目でAPIと分かるようなURLにする</h5>

<p><small>APIを利用する人がURLを見た時にAPIと分かるようなURLにするのが良いです。<br>
例えは、ディレクトリに分ける場合と、サブドメインに切る場合があります。<br>
<a href="http://example.com/api">http://example.com/api</a><br>
<a href="http://api.example.com">http://api.example.com</a></small></p>

<h5>URLにAPIのバージョンを含める</h5>

<p><small>URLにAPIバージョンを含めるようにしたら管理もしやすいし、APIを使用する人がAPIのバージョンを選択しやすくなり、バージョンの切り分けも容易となるメリットが有ります。<br>
<a href="http://api.example.com/1/article">http://api.example.com/1/article</a><br>
<a href="http://api.example.com/v1/article/">http://api.example.com/v1/article/</a></small></p>

<h5>URLに動詞を含めず、複数形の名詞のみで構成する</h5>

<p><small>まず最初に好ましくないURLについて見てみると、<br>
<a href="http://api.example.com/v1/createArticle">http://api.example.com/v1/createArticle</a><br>
<a href="http://api.example.com/v1/article/create">http://api.example.com/v1/article/create</a><br>
<a href="http://api.example.com/v1/article/1/create">http://api.example.com/v1/article/1/create</a><br>
<a href="http://api.example.com/v1/article/createComment">http://api.example.com/v1/article/createComment</a><br>
<a href="http://api.example.com/v1/article/1/comment/1/create">http://api.example.com/v1/article/1/comment/1/create</a><br>
<br>
上記のリソースに対して一意ではないという問題と、一つのリソースに対してCRUDの操作が必要になった場合にその操作の分だけURLが増えてしまう問題があります。<br>
<br>
これを名詞のURLにすると、以下のようになります。<br>
<br>
<a href="http://api.example.com/v1/articles">http://api.example.com/v1/articles</a><br>
<small>article全てを指す</small><br>
<a href="http://api.example.com/v1/articles/1">http://api.example.com/v1/articles/1</a><br>
<small>articlesの中のID：1を指す</small><br>
<a href="http://api.example.com/v1/articles/1/comments">http://api.example.com/v1/articles/1/comments</a><br>
<small>articlesの  中のID:1についたcomment全てを指す</small><br>
<a href="http://api.example.com/v1/articles/1/comments/1">http://api.example.com/v1/articles/1/comments/1</a><br>
<small>articlesの中のID:1についたcommentsの中のID:1を指す</small></small></p>

<h5>リソースの関係性がひと目で分かるようにする</h5>

<p><small>URLを見ただけで、リソースがどこに属しているか分かるようにするのがベストです。<br>
例えば、記事に属するコメントを表す場合は以下のように書いてみます。<br>
<a href="http://api.example.com/v1/articles/1/comments">http://api.example.com/v1/articles/1/comments</a></small></p>

<h5>アプリケーションや言語に依存する拡張子は含めない</h5>

<p><small>URLの末尾に.htmlや.phpなど言語に関係した拡張子を付けないようにします。将来的にAPIの仕様変更で言語の変更などがあった場合に困ることになります。言語の拡張子がなければ、フレームワークや言語に縛られることがないので、様々な変更に対応ができます。</small></p>

<h5>長くしすぎない</h5>

<p><small><a href="http://api.example.com/articles/128/comments/10/tags/10/......">http://api.example.com/articles/128/comments/10/tags/10/......</a><br>
のように不要に長いURLをしないことが良いです。</small>
<br></p>

<h2>参照</h2>

<p><small>
<a href="http://wp.tech-style.info/archives/683#URL_8211_Cool_URI">http://wp.tech-style.info/archives/683#URL_8211_Cool_URI</a><br>
<a href="http://karur4n.hatenablog.com/entry/read-webtechbook">http://karur4n.hatenablog.com/entry/read-webtechbook</a><br>
<a href="https://ja.wikipedia.org/wiki/REST">https://ja.wikipedia.org/wiki/REST</a>
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/26/grape-gem/">Grape Gem</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-26T10:54:56+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:54 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>Grapeとは</h1>

<p>Grape gemはruby用のREST-APIフレームワークです。簡単にRESTfulなAPIを開発するための単純なDSLを提供することによって、Railsとシナトラなどの既存のWebアプリケーションフレームワークを補完するために設計されています。</p>

<h1>Grape gemの実装</h1>

<h3>Grape gemのインストール</h3>

<p>まず、GemfileにGrapeを追加します。<br>
<small>Gemfile</small></p>

<div class="colorscripter-code" style="width: 100%; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">gem&nbsp;'grape'</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
bundle installをします。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">bundle&nbsp;install</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>model追加</h3>

<p>modelを追加してみます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">rails&nbsp;g&nbsp;model&nbsp;test_data&nbsp;name:string&nbsp;age:integer</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">rake&nbsp;db:migrate</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>application.rbの設定</h3>

<p>application.rbに以下のように書き、apiのパスを設定します。<br>
<small>application.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">config.paths.add&nbsp;File.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'app'</span>,&nbsp;<span style="color:#ffd500">'api'</span>),&nbsp;glob:&nbsp;File.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'**'</span>,&nbsp;<span style="color:#ffd500">'*.rb'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">config.autoload_paths&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;Dir[Rails.root.<span style="color:#4be6fa">join</span>(<span style="color:#ffd500">'app'</span>,&nbsp;<span style="color:#ffd500">'api'</span>,&nbsp;<span style="color:#ffd500">'*'</span>)]</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>API作成</h3>

<p>appフォルダーにapiフォルダーを追加します。
ここに二つのファイルを作ります。一つは実際にapiとして動くファイルで、もう一つはそのファイルをmountするファイルです。
下のように書いてみます。<br>
<small>api/user/data.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">resource&nbsp;:user_data&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;desc&nbsp;<span style="color:#ffd500">"List&nbsp;all&nbsp;User"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestData.all</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
<small>api/api.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">class</span>&nbsp;API&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;Grape::API</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;prefix&nbsp;<span style="color:#ffd500">'api'</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;version&nbsp;<span style="color:#ffd500">'v1'</span>,&nbsp;using:&nbsp;:path</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mount&nbsp;User::Data</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<h3>APIのルーティング追加</h3>

<p>route.rbにルーティング追加します。<br>
<small>route.rb</small></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">mount&nbsp;API&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">'/'</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
それからrailsのserverを起動します。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">rails&nbsp;server</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールに下のように入力してみます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
そうすると、databaseに何もないので 「[ ]」 しか出てこないです。<br>
では、データーを入れてみましょう。<br>
まずはdata.rbにソースコードを追加します。もっと楽にするようにヘルパーを書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">helpers&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;user_params</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ActionController::Parameters.<span style="color:#ff3399">new</span>(params).permit(:name,&nbsp;:age)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">def</span>&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@user&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;TestData.find(params[:id])</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
そして、下のようにcreateのコードを書きます。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"create&nbsp;a&nbsp;new&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:name,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:age,&nbsp;type:&nbsp;Integer</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">post&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;TestData.create<span style="color:#0086b3"></span><span style="color:#ff3399">!</span>(user_params)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールにこう書くと、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json&nbsp;-d&nbsp;"name=Jo&age=30"</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":1,"name":"Jo","age":30,"created_at":"2016-07-26T07:15:11.212Z","updated_at":"2016-07-26T07:15:11.212Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p>簡単にデーターベースに入れ込みます。<br>
deleteとupdateも同じように作成します。</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"delete&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">delete&nbsp;<span style="color:#ffd500">':id'</span>&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;@user.destroy<span style="color:#0086b3"></span><span style="color:#ff3399">!</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"update&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">put&nbsp;<span style="color:#ffd500">':id'</span>&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;@user.update(user_params)</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
タミナールで実行してみると、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;-X&nbsp;DELETE&nbsp;http://localhost:3000/api/v1/user_data/1.json</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":1,"name":"Jo","age":30,"created_at":"2016-07-26T05:11:16.608Z","updated_at":"2016-07-26T05:11:16.608Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
もう一度データーを作って</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;http://localhost:3000/api/v1/user_data.json&nbsp;-d&nbsp;"name=Jo&age=30"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">{"id":2,"name":"Jo","age":30,"created_at":"2016-07-26T05:16:45.169Z","updated_at":"2016-07-26T05:16:45.169Z"}</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br></p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;-X&nbsp;PUT&nbsp;http://localhost:3000/api/v1/user_data/2.json&nbsp;-d&nbsp;"age=100"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">true</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
showの部分はちょっと迷いましたけど、</p>

<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">desc&nbsp;<span style="color:#ffd500">"show&nbsp;an&nbsp;user"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">params&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;requires&nbsp;:id,&nbsp;type:&nbsp;String</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">route_param&nbsp;:id&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;get&nbsp;<span style="color:#ff3399">do</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_user</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">end</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">end</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"></td></tr></table></div>


<p><br>
こういうふうにGETをroute_paramに変えると簡単にできました。
</small></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/26/first-post/">First Post</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-26T10:24:28+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:24 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><small></p>

<h1>a</h1>

<h3>a-1</h3>

<h5>a-1-1</h5>

<p>abcd</p>

<h3>a-2</h3>

<h5>a-2-1</h5>

<p>abcd</p>

<h1>b</h1>

<h3>b-1</h3>

<h5>b-1-1</h5>

<p>abcd</p>

<h3>b-2</h3>

<h5>b-2-1</h5>

<p>abcd
</small></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/02/28/firebase-analytics-event/">Firebase Analyticsを利用してEventを発生させる方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/20/counter-cache-in-rails/">カウンターキャッシュについて</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/08/using-cache-with-rails/">Railsにおけるキャッシュの使い方</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/01/includes-and-joins-in-rails/">Railsのincludesとjoins</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/25/railsmodelcallback/">RailsのModelのコールバック</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Jo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
